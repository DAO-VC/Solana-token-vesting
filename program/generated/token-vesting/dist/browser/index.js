import{PublicKey as t,Transaction as e,TransactionInstruction as n,SendTransactionError as r,SYSVAR_RENT_PUBKEY as o,SystemProgram as i}from"@solana/web3.js";import s,{Buffer as a}from"buffer";import c from"bn.js";import u from"bs58";import*as l from"base64-js";import d from"camelcase";import{sha256 as h}from"js-sha256";import*as f from"@project-serum/borsh";import{inflate as p}from"pako";import m from"eventemitter3";import*as y from"assert";var g=Object.freeze({__proto__:null,encode:function(t){return t.reduce(((t,e)=>t+e.toString(16).padStart(2,"0")),"0x")},decode:function(t){0===t.indexOf("0x")&&(t=t.substr(2)),t.length%2==1&&(t="0"+t);let e=t.match(/.{2}/g);return null===e?a.from([]):a.from(e.map((t=>parseInt(t,16))))}});function w(t){return new TextDecoder("utf-8").decode(t)}function v(t){return(new TextEncoder).encode(t)}var b=Object.freeze({__proto__:null,decode:w,encode:v});function E(t){return u.encode(t)}var A=Object.freeze({__proto__:null,encode:E,decode:function(t){return u.decode(t)}});function _(t){return a.from(l.toByteArray(t))}var S=Object.freeze({__proto__:null,encode:function(t){return l.fromByteArray(t)},decode:_}),I=Object.freeze({__proto__:null,hex:g,utf8:b,bs58:A,base64:S});function x(t){const e=new Map;return t.errors&&t.errors.forEach((t=>{var n;let r=null!==(n=t.msg)&&void 0!==n?n:t.name;e.set(t.code,r)})),e}function k(t,...e){if(t.args.length!=e.length)throw new Error("Invalid argument length");const n={};let r=0;return t.args.forEach((t=>{n[t.name]=e[r],r+=1})),n}function L(t,e={}){t.forEach((t=>{if("accounts"in t)L(t.accounts,e[t.name]);else if(void 0===e[t.name])throw new Error(`Invalid arguments: ${t.name} not provided.`)}))}function T(e){return e instanceof t?e:new t(e)}class O extends TypeError{constructor(t,e){let n;const{message:r,...o}=t,{path:i}=t;super(0===i.length?r:"At path: "+i.join(".")+" -- "+r),this.value=void 0,this.key=void 0,this.type=void 0,this.refinement=void 0,this.path=void 0,this.branch=void 0,this.failures=void 0,Object.assign(this,o),this.name=this.constructor.name,this.failures=()=>{var r;return null!=(r=n)?r:n=[t,...e()]}}}function B(t){return"object"==typeof t&&null!=t}function P(t){return"string"==typeof t?JSON.stringify(t):""+t}function M(t,e,n,r){if(!0===t)return;!1===t?t={}:"string"==typeof t&&(t={message:t});const{path:o,branch:i}=e,{type:s}=n,{refinement:a,message:c="Expected a value of type `"+s+"`"+(a?" with refinement `"+a+"`":"")+", but received: `"+P(r)+"`"}=t;return{value:r,type:s,refinement:a,key:o[o.length-1],path:o,branch:i,...t,message:c}}function*U(t,e,n,r){var o;B(o=t)&&"function"==typeof o[Symbol.iterator]||(t=[t]);for(const o of t){const t=M(o,e,n,r);t&&(yield t)}}function*D(t,e,n){void 0===n&&(n={});const{path:r=[],branch:o=[t],coerce:i=!1,mask:s=!1}=n,a={path:r,branch:o};if(i&&(t=e.coercer(t,a),s&&"type"!==e.type&&B(e.schema)&&B(t)&&!Array.isArray(t)))for(const n in t)void 0===e.schema[n]&&delete t[n];let c=!0;for(const n of e.validator(t,a))c=!1,yield[n,void 0];for(let[n,u,l]of e.entries(t,a)){const e=D(u,l,{path:void 0===n?r:[...r,n],branch:void 0===n?o:[...o,u],coerce:i,mask:s});for(const r of e)r[0]?(c=!1,yield[r[0],void 0]):i&&(u=r[1],void 0===n?t=u:t instanceof Map?t.set(n,u):t instanceof Set?t.add(u):B(t)&&(t[n]=u))}if(c)for(const n of e.refiner(t,a))c=!1,yield[n,void 0];c&&(yield[void 0,t])}class N{constructor(t){this.TYPE=void 0,this.type=void 0,this.schema=void 0,this.coercer=void 0,this.validator=void 0,this.refiner=void 0,this.entries=void 0;const{type:e,schema:n,validator:r,refiner:o,coercer:i=(t=>t),entries:s=function*(){}}=t;this.type=e,this.schema=n,this.entries=s,this.coercer=i,this.validator=r?(t,e)=>U(r(t,e),e,this,t):()=>[],this.refiner=o?(t,e)=>U(o(t,e),e,this,t):()=>[]}assert(t){return function(t,e){const n=R(t,e);if(n[0])throw n[0]}(t,this)}create(t){return C(t,this)}is(t){return z(t,this)}mask(t){return function(t,e){const n=R(t,e,{coerce:!0,mask:!0});if(n[0])throw n[0];return n[1]}(t,this)}validate(t,e){return void 0===e&&(e={}),R(t,this,e)}}function C(t,e){const n=R(t,e,{coerce:!0});if(n[0])throw n[0];return n[1]}function z(t,e){return!R(t,e)[0]}function R(t,e,n){void 0===n&&(n={});const r=D(t,e,n),o=function(t){const{done:e,value:n}=t.next();return e?void 0:n}(r);return o[0]?[new O(o[0],(function*(){for(const t of r)t[0]&&(yield t[0])})),void 0]:[void 0,o[1]]}function j(t,e){return new N({type:t,schema:null,validator:e})}function V(t){return new N({type:"array",schema:t,*entries(e){if(t&&Array.isArray(e))for(const[n,r]of e.entries())yield[n,r,t]},coercer:t=>Array.isArray(t)?t.slice():t,validator:t=>Array.isArray(t)||"Expected an array value, but received: "+P(t)})}function $(t){const e=P(t),n=typeof t;return new N({type:"literal",schema:"string"===n||"number"===n||"boolean"===n?t:null,validator:n=>n===t||"Expected the literal `"+e+"`, but received: "+P(n)})}function F(t){return new N({...t,validator:(e,n)=>null===e||t.validator(e,n),refiner:(e,n)=>null===e||t.refiner(e,n)})}function q(){return j("number",(t=>"number"==typeof t&&!isNaN(t)||"Expected a number, but received: "+P(t)))}function K(t){return new N({...t,validator:(e,n)=>void 0===e||t.validator(e,n),refiner:(e,n)=>void 0===e||t.refiner(e,n)})}function G(){return j("string",(t=>"string"==typeof t||"Expected a string, but received: "+P(t)))}function W(t){const e=Object.keys(t);return new N({type:"type",schema:t,*entries(n){if(B(n))for(const r of e)yield[r,n[r],t[r]]},validator:t=>B(t)||"Expected an object, but received: "+P(t)})}function H(t){const e=t.map((t=>t.type)).join(" | ");return new N({type:"union",schema:null,coercer:(e,n)=>(t.find((t=>{const[n]=t.validate(e,{coerce:!0});return!n}))||J()).coercer(e,n),validator(n,r){const o=[];for(const e of t){const[...t]=D(n,e,r),[i]=t;if(!i[0])return[];for(const[e]of t)e&&o.push(e)}return["Expected the value to satisfy a union of `"+e+"`, but received: "+P(n),...o]}})}function J(){return j("unknown",(()=>!0))}async function Z(t,e,n){if(e.length<=99)return await X(t,e,n);{const r=function(t,e){return Array.apply(0,new Array(Math.ceil(t.length/99))).map(((e,n)=>t.slice(99*n,99*(n+1))))}(e);return(await Promise.all(r.map((e=>X(t,e,n))))).flat()}}async function X(t,e,n){const r=null!=n?n:t.commitment;return(await t.getMultipleAccountsInfo(e,r)).map(((t,n)=>null===t?null:{publicKey:e[n],account:t}))}async function Q(t,e,n,o,i){n&&n.length>0&&e.sign(...n);const s=e._compile(),a=s.serialize(),c=e._serialize(a).toString("base64"),u={encoding:"base64",commitment:null!=o?o:t.commitment};if(i){const t=(Array.isArray(i)?i:s.nonProgramIds()).map((t=>t.toBase58()));u.accounts={encoding:"base64",addresses:t}}n&&(u.sigVerify=!0);const l=[c,u],d=C(await t._rpcRequest("simulateTransaction",l),et);if("error"in d){let t;if("data"in d.error&&(t=d.error.data.logs,t&&Array.isArray(t))){const e="\n    ",n=e+t.join(e);console.error(d.error.message,n)}throw new r("failed to simulate transaction: "+d.error.message,t)}return d.result}const Y=tt(J());function tt(t){return H([W({jsonrpc:$("2.0"),id:G(),result:t}),W({jsonrpc:$("2.0"),id:G(),error:W({code:J(),message:G(),data:K(j("any",(()=>!0)))})})])}const et=(nt=W({err:F(H([W({}),G()])),logs:F(V(G())),accounts:K(F(V(F(W({executable:j("boolean",(t=>"boolean"==typeof t)),owner:G(),lamports:q(),data:V(G()),rentEpoch:K(q())}))))),unitsConsumed:K(q())}),function(t){return function(t,e,n){return new N({...t,coercer:(r,o)=>z(r,e)?t.coercer(n(r),o):t.coercer(r,o)})}(tt(t),Y,(e=>"error"in e?e:{...e,result:C(e.result,t)}))}(W({context:W({slot:q()}),value:nt})));var nt,rt=Object.freeze({__proto__:null,invoke:async function(t,r,o,i){t=T(t),i||(i=ct());const s=new e;if(s.add(new n({programId:t,keys:null!=r?r:[],data:o})),void 0===i.sendAndConfirm)throw new Error("This function requires 'Provider.sendAndConfirm' to be implemented.");return await i.sendAndConfirm(s,[])},getMultipleAccounts:Z,simulateTransaction:Q});class ot{constructor(t,e,n){this.connection=t,this.wallet=e,this.opts=n,this.publicKey=e.publicKey}static defaultOptions(){return{preflightCommitment:"processed",commitment:"processed"}}static local(t,e){throw new Error("Provider local is not available on browser.")}static env(){throw new Error("Provider env is not available on browser.")}async sendAndConfirm(t,e,n){var o;void 0===n&&(n=this.opts),t.feePayer=this.wallet.publicKey,t.recentBlockhash=(await this.connection.getRecentBlockhash(n.preflightCommitment)).blockhash,t=await this.wallet.signTransaction(t),(null!=e?e:[]).forEach((e=>{t.partialSign(e)}));const i=t.serialize();try{return await st(this.connection,i,n)}catch(e){if(e instanceof at){const n=await this.connection.getTransaction(E(t.signature),{commitment:"confirmed"});if(n){const t=null===(o=n.meta)||void 0===o?void 0:o.logMessages;throw t?new r(e.message,t):e}throw e}throw e}}async sendAll(t,e){void 0===e&&(e=this.opts);const n=await this.connection.getRecentBlockhash(e.preflightCommitment);let r=t.map((t=>{var e;let r=t.tx,o=null!==(e=t.signers)&&void 0!==e?e:[];return r.feePayer=this.wallet.publicKey,r.recentBlockhash=n.blockhash,o.forEach((t=>{r.partialSign(t)})),r}));const o=await this.wallet.signAllTransactions(r),i=[];for(let t=0;t<r.length;t+=1){const n=o[t].serialize();i.push(await st(this.connection,n,e))}return i}async simulate(t,e,n,r){t.feePayer=this.wallet.publicKey,t.recentBlockhash=(await this.connection.getLatestBlockhash(null!=n?n:this.connection.commitment)).blockhash,t=await this.wallet.signTransaction(t);const o=await Q(this.connection,t,e,n,r);if(o.value.err)throw new it(o.value);return o.value}}class it extends Error{constructor(t,e){super(e),this.simulationResponse=t}}async function st(t,e,n){const r=n&&{skipPreflight:n.skipPreflight,preflightCommitment:n.preflightCommitment||n.commitment},o=await t.sendRawTransaction(e,r),i=(await t.confirmTransaction(o,n&&n.commitment)).value;if(i.err)throw new at(`Raw transaction ${o} failed (${JSON.stringify(i)})`);return o}class at extends Error{constructor(t){super(t)}}function ct(){return null===ut?ot.local():ut}let ut=null;const lt=new Set(["anchor-deprecated-state","debug-logs"]),dt=new Map;function ht(t){return void 0!==dt.get(t)}var ft=Object.freeze({__proto__:null,set:function(t){if(!lt.has(t))throw new Error("Invalid feature");dt.set(t,!0)},isSet:ht});class pt extends Error{constructor(t){super(t),this.name="IdlError"}}class mt{constructor(t){this.stack=t}static parse(e){var n;const r=/^Program (\w*) invoke/,o=/^Program \w* success/,i=[];for(let s=0;s<e.length;s++){if(o.exec(e[s])){i.pop();continue}const a=null===(n=r.exec(e[s]))||void 0===n?void 0:n[1];a&&i.push(new t(a))}return new mt(i)}}class yt extends Error{constructor(t,e,n,r,o,i){super(n.join("\n").replace("Program log: ","")),this.errorLogs=n,this.logs=r,this.error={errorCode:t,errorMessage:e,comparedValues:i,origin:o},this._programErrorStack=mt.parse(r)}static parse(e){if(!e)return null;const n=e.findIndex((t=>t.startsWith("Program log: AnchorError")));if(-1===n)return null;const r=e[n],o=[r];let i;if(n+1<e.length)if("Program log: Left:"===e[n+1]){const r=/^Program log: (.*)$/,s=r.exec(e[n+2])[1],a=r.exec(e[n+4])[1];i=[new t(s),new t(a)],o.push(...e.slice(n+1,n+5))}else if(e[n+1].startsWith("Program log: Left:")){const t=/^Program log: (Left|Right): (.*)$/,r=t.exec(e[n+1])[2],s=t.exec(e[n+2])[2];o.push(...e.slice(n+1,n+3)),i=[r,s]}const s=/^Program log: AnchorError occurred\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(r),a=/^Program log: AnchorError thrown in (.*):(\d*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(r),c=/^Program log: AnchorError caused by account: (.*)\. Error Code: (.*)\. Error Number: (\d*)\. Error Message: (.*)\./.exec(r);if(s){const[t,n,r]=s.slice(1,4),a={code:t,number:parseInt(n)};return new yt(a,r,o,e,void 0,i)}if(a){const[t,n,r,s,c]=a.slice(1,6),u={code:r,number:parseInt(s)},l={file:t,line:parseInt(n)};return new yt(u,c,o,e,l,i)}if(c){const[t,n,r,s]=c.slice(1,5),a=t,u={code:n,number:parseInt(r)};return new yt(u,s,o,e,a,i)}return null}get program(){return this._programErrorStack.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){return this._programErrorStack.stack}toString(){return this.message}}class gt extends Error{constructor(t,e,n){super(),this.code=t,this.msg=e,this.logs=n,n&&(this._programErrorStack=mt.parse(n))}static parse(t,e){const n=t.toString();let r,o;if(n.includes("custom program error:")){let t=n.split("custom program error: ");if(2!==t.length)return null;r=t[1]}else{const t=n.match(/"Custom":([0-9]+)}/g);if(!t||t.length>1)return null;r=t[0].match(/([0-9]+)/g)[0]}try{o=parseInt(r)}catch(t){return null}let i=e.get(o);return void 0!==i?new gt(o,i,t.logs):(i=vt.get(o),void 0!==i?new gt(o,i,t.logs):null)}get program(){var t;return null===(t=this._programErrorStack)||void 0===t?void 0:t.stack[this._programErrorStack.stack.length-1]}get programErrorStack(){var t;return null===(t=this._programErrorStack)||void 0===t?void 0:t.stack}toString(){return this.msg}}function wt(t,e){ht("debug-logs")&&console.log("Translating error:",t);const n=yt.parse(t.logs);if(n)return n;const r=gt.parse(t,e);if(r)return r;if(t.logs){const e={get:function(e,n){return"programErrorStack"===n?e.programErrorStack.stack:"program"===n?e.programErrorStack.stack[t.programErrorStack.stack.length-1]:Reflect.get(...arguments)}};return t.programErrorStack=mt.parse(t.logs),new Proxy(t,e)}return t}const vt=new Map([[100,"8 byte instruction identifier not provided"],[101,"Fallback functions are not supported"],[102,"The program could not deserialize the given instruction"],[103,"The program could not serialize the given instruction"],[1e3,"The program was compiled without idl instructions"],[1001,"The transaction was given an invalid program for the IDL instruction"],[2e3,"A mut constraint was violated"],[2001,"A has_one constraint was violated"],[2002,"A signer constraint was violated"],[2003,"A raw constraint was violated"],[2004,"An owner constraint was violated"],[2005,"A rent exemption constraint was violated"],[2006,"A seeds constraint was violated"],[2007,"An executable constraint was violated"],[2008,"A state constraint was violated"],[2009,"An associated constraint was violated"],[2010,"An associated init constraint was violated"],[2011,"A close constraint was violated"],[2012,"An address constraint was violated"],[2013,"Expected zero account discriminant"],[2014,"A token mint constraint was violated"],[2015,"A token owner constraint was violated"],[2016,"A mint mint authority constraint was violated"],[2017,"A mint freeze authority constraint was violated"],[2018,"A mint decimals constraint was violated"],[2019,"A space constraint was violated"],[2500,"A require expression was violated"],[2501,"A require_eq expression was violated"],[2502,"A require_keys_eq expression was violated"],[2503,"A require_neq expression was violated"],[2504,"A require_keys_neq expression was violated"],[2505,"A require_gt expression was violated"],[2506,"A require_gte expression was violated"],[3e3,"The account discriminator was already set on this account"],[3001,"No 8 byte discriminator was found on the account"],[3002,"8 byte discriminator did not match what was expected"],[3003,"Failed to deserialize the account"],[3004,"Failed to serialize the account"],[3005,"Not enough account keys given to the instruction"],[3006,"The given account is not mutable"],[3007,"The given account is owned by a different program than expected"],[3008,"Program ID was not as expected"],[3009,"Program account is not executable"],[3010,"The given account did not sign"],[3011,"The given account is not owned by the system program"],[3012,"The program expected this account to be already initialized"],[3013,"The given account is not a program data account"],[3014,"The given account is not the associated token account"],[3015,"The given public key does not match the required sysvar"],[3016,"The account reallocation exceeds the MAX_PERMITTED_DATA_INCREASE limit"],[3017,"The account was duplicated for more than one reallocation"],[4e3,"The given state account does not have the correct address"],[4100,"The declared program id does not match the actual program id"],[5e3,"The API being used is deprecated and should no longer be used"]]);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var bt=function(){return bt=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},bt.apply(this,arguments)};function Et(t){return t.toLowerCase()}var At=[/([a-z0-9])([A-Z])/g,/([A-Z])([A-Z][a-z])/g],_t=/[^A-Z0-9]+/gi;function St(t,e,n){return e instanceof RegExp?t.replace(e,n):e.reduce((function(t,e){return t.replace(e,n)}),t)}class It{static fieldLayout(t,e){const n=void 0!==t.name?d(t.name):void 0;switch(t.type){case"bool":return f.bool(n);case"u8":return f.u8(n);case"i8":return f.i8(n);case"u16":return f.u16(n);case"i16":return f.i16(n);case"u32":return f.u32(n);case"i32":return f.i32(n);case"f32":return f.f32(n);case"u64":return f.u64(n);case"i64":return f.i64(n);case"f64":return f.f64(n);case"u128":return f.u128(n);case"i128":return f.i128(n);case"bytes":return f.vecU8(n);case"string":return f.str(n);case"publicKey":return f.publicKey(n);default:if("vec"in t.type)return f.vec(It.fieldLayout({name:void 0,type:t.type.vec},e),n);if("option"in t.type)return f.option(It.fieldLayout({name:void 0,type:t.type.option},e),n);if("defined"in t.type){const r=t.type.defined;if(void 0===e)throw new pt("User defined types not provided");const o=e.filter((t=>t.name===r));if(1!==o.length)throw new pt(`Type not found: ${JSON.stringify(t)}`);return It.typeDefLayout(o[0],e,n)}if("array"in t.type){let r=t.type.array[0],o=t.type.array[1],i=It.fieldLayout({name:void 0,type:r},e);return f.array(i,o,n)}throw new Error(`Not yet implemented: ${t}`)}}static typeDefLayout(t,e=[],n){if("struct"===t.type.kind){const r=t.type.fields.map((t=>It.fieldLayout(t,e)));return f.struct(r,n)}if("enum"===t.type.kind){let r=t.type.variants.map((t=>{const n=d(t.name);if(void 0===t.fields)return f.struct([],n);const r=t.fields.map((t=>{if(!t.hasOwnProperty("name"))throw new Error("Tuple enum variants not yet implemented.");return It.fieldLayout(t,e)}));return f.struct(r,n)}));return void 0!==n?f.rustEnum(r).replicate(n):f.rustEnum(r,n)}throw new Error(`Unknown type kint: ${t}`)}}class xt{constructor(t){this.idl=t,this.ixLayout=xt.parseIxLayout(t);const e=new Map;t.instructions.forEach((t=>{const n=Lt("global",t.name);e.set(u.encode(n),{layout:this.ixLayout.get(t.name),name:t.name})})),t.state&&t.state.methods.map((t=>{const n=Lt("state",t.name);e.set(u.encode(n),{layout:this.ixLayout.get(t.name),name:t.name})})),this.sighashLayouts=e}encode(t,e){return this._encode("global",t,e)}encodeState(t,e){return this._encode("state",t,e)}_encode(t,e,n){const r=a.alloc(1e3),o=d(e),i=this.ixLayout.get(o);if(!i)throw new Error(`Unknown method: ${o}`);const s=i.encode(n,r),c=r.slice(0,s);return a.concat([Lt(t,e),c])}static parseIxLayout(t){const e=(t.state?t.state.methods:[]).map((e=>{let n=e.args.map((e=>{var n,r;return It.fieldLayout(e,Array.from([...null!==(n=t.accounts)&&void 0!==n?n:[],...null!==(r=t.types)&&void 0!==r?r:[]]))}));const r=d(e.name);return[r,f.struct(n,r)]})).concat(t.instructions.map((e=>{let n=e.args.map((e=>{var n,r;return It.fieldLayout(e,Array.from([...null!==(n=t.accounts)&&void 0!==n?n:[],...null!==(r=t.types)&&void 0!==r?r:[]]))}));const r=d(e.name);return[r,f.struct(n,r)]})));return new Map(e)}decode(t,e="hex"){"string"==typeof t&&(t="hex"===e?a.from(t,"hex"):u.decode(t));let n=u.encode(t.slice(0,8)),r=t.slice(8);const o=this.sighashLayouts.get(n);return o?{data:o.layout.decode(r),name:o.name}:null}format(t,e){return kt.format(t,e,this.idl)}}class kt{static format(t,e,n){const r=n.instructions.filter((e=>t.name===e.name))[0];if(void 0===r)return console.error("Invalid instruction given"),null;const o=r.args.map((e=>({name:e.name,type:kt.formatIdlType(e.type),data:kt.formatIdlData(e,t.data[e.name],n.types)}))),i=kt.flattenIdlAccounts(r.accounts);return{args:o,accounts:e.map(((t,e)=>e<i.length?{name:i[e].name,...t}:{name:void 0,...t}))}}static formatIdlType(t){if("string"==typeof t)return t;if("vec"in t)return`Vec<${this.formatIdlType(t.vec)}>`;if("option"in t)return`Option<${this.formatIdlType(t.option)}>`;if("defined"in t)return t.defined;if("array"in t)return`Array<${t.array[0]}; ${t.array[1]}>`;throw new Error(`Unknown IDL type: ${t}`)}static formatIdlData(t,e,n){if("string"==typeof t.type)return e.toString();if(t.type.hasOwnProperty("vec"))return"["+e.map((e=>this.formatIdlData({name:"",type:t.type.vec},e))).join(", ")+"]";if(t.type.hasOwnProperty("option"))return null===e?"null":this.formatIdlData({name:"",type:t.type.option},e,n);if(t.type.hasOwnProperty("defined")){if(void 0===n)throw new Error("User defined types not provided");const r=n.filter((e=>e.name===t.type.defined));if(1!==r.length)throw new Error(`Type not found: ${t.type.defined}`);return kt.formatIdlDataDefined(r[0],e,n)}return"unknown"}static formatIdlDataDefined(t,e,n){if("struct"===t.type.kind){const r=t.type;return"{ "+Object.keys(e).map((t=>{const o=r.fields.filter((e=>e.name===t))[0];if(void 0===o)throw new Error("Unable to find type");return t+": "+kt.formatIdlData(o,e[t],n)})).join(", ")+" }"}if(0===t.type.variants.length)return"{}";if(t.type.variants[0].name){const r=t.type.variants,o=Object.keys(e)[0],i=e[o],s=Object.keys(i).map((t=>{var e;const s=i[t],a=null===(e=r[o])||void 0===e?void 0:e.filter((e=>e.name===t))[0];if(void 0===a)throw new Error("Unable to find variant");return t+": "+kt.formatIdlData(a,s,n)})).join(", "),a=d(o,{pascalCase:!0});return 0===s.length?a:`${a} { ${s} }`}return"Tuple formatting not yet implemented"}static flattenIdlAccounts(t,e){return t.map((t=>{const n=function(t){const e=t.replace(/([A-Z])/g," $1");return e.charAt(0).toUpperCase()+e.slice(1)}(t.name);if(t.hasOwnProperty("accounts")){const r=e?`${e} > ${n}`:n;return kt.flattenIdlAccounts(t.accounts,r)}return{...t,name:e?`${e} > ${n}`:n}})).flat()}}function Lt(t,e){var n;let r=`${t}:${void 0===n&&(n={}),function(t,e){return void 0===e&&(e={}),function(t,e){void 0===e&&(e={});for(var n=e.splitRegexp,r=void 0===n?At:n,o=e.stripRegexp,i=void 0===o?_t:o,s=e.transform,a=void 0===s?Et:s,c=e.delimiter,u=void 0===c?" ":c,l=St(St(t,r,"$1\0$2"),i,"\0"),d=0,h=l.length;"\0"===l.charAt(d);)d++;for(;"\0"===l.charAt(h-1);)h--;return l.slice(d,h).split("\0").map(a).join(u)}(t,bt({delimiter:"."},e))}(e,bt({delimiter:"_"},n))}`;return a.from(h.digest(r)).slice(0,8)}function Tt(t,e){if("enum"===e.type.kind){let n=e.type.variants.map((e=>void 0===e.fields?0:e.fields.map((e=>{if("object"!=typeof e||!("name"in e))throw new Error("Tuple enum variants not yet implemented.");return Ot(t,e.type)})).reduce(((t,e)=>t+e))));return Math.max(...n)+1}return void 0===e.type.fields?0:e.type.fields.map((e=>Ot(t,e.type))).reduce(((t,e)=>t+e),0)}function Ot(t,e){var n,r;switch(e){case"bool":case"u8":case"i8":case"bytes":case"string":return 1;case"i16":case"u16":return 2;case"u32":case"i32":case"f32":return 4;case"u64":case"i64":case"f64":return 8;case"u128":case"i128":return 16;case"publicKey":return 32;default:if("vec"in e)return 1;if("option"in e)return 1+Ot(t,e.option);if("coption"in e)return 4+Ot(t,e.coption);if("defined"in e){const o=null!==(r=null===(n=t.types)||void 0===n?void 0:n.filter((t=>t.name===e.defined)))&&void 0!==r?r:[];if(1!==o.length)throw new pt(`Type not found: ${JSON.stringify(e)}`);return Tt(t,o[0])}if("array"in e){let n=e.array[0],r=e.array[1];return Ot(t,n)*r}throw new Error(`Invalid type ${JSON.stringify(e)}`)}}class Bt{constructor(t){if(void 0===t.accounts)return void(this.accountLayouts=new Map);const e=t.accounts.map((e=>[e.name,It.typeDefLayout(e,t.types)]));this.accountLayouts=new Map(e),this.idl=t}async encode(t,e){const n=a.alloc(1e3),r=this.accountLayouts.get(t);if(!r)throw new Error(`Unknown account: ${t}`);const o=r.encode(e,n);let i=n.slice(0,o),s=Bt.accountDiscriminator(t);return a.concat([s,i])}decode(t,e){if(Bt.accountDiscriminator(t).compare(e.slice(0,8)))throw new Error("Invalid account discriminator");return this.decodeUnchecked(t,e)}decodeUnchecked(t,e){const n=e.slice(8),r=this.accountLayouts.get(t);if(!r)throw new Error(`Unknown account: ${t}`);return r.decode(n)}memcmp(t,e){const n=Bt.accountDiscriminator(t);return{offset:0,bytes:u.encode(e?a.concat([n,e]):n)}}size(t){var e;return 8+(null!==(e=Tt(this.idl,t))&&void 0!==e?e:0)}static accountDiscriminator(t){return a.from(h.digest(`account:${d(t,{pascalCase:!0})}`)).slice(0,8)}}class Pt{constructor(t){if(void 0===t.events)return void(this.layouts=new Map);const e=t.events.map((e=>{let n={name:e.name,type:{kind:"struct",fields:e.fields.map((t=>({name:t.name,type:t.type})))}};return[e.name,It.typeDefLayout(n,t.types)]}));this.layouts=new Map(e),this.discriminators=new Map(void 0===t.events?[]:t.events.map((t=>[l.fromByteArray(Mt(t.name)),t.name])))}decode(t){let e;try{e=a.from(l.toByteArray(t))}catch(t){return null}const n=l.fromByteArray(e.slice(0,8)),r=this.discriminators.get(n);if(void 0===r)return null;const o=this.layouts.get(r);if(!o)throw new Error(`Unknown event: ${r}`);return{data:o.decode(e.slice(8)),name:r}}}function Mt(t){return a.from(h.digest(`event:${t}`)).slice(0,8)}class Ut{constructor(t){if(void 0===t.state)throw new Error("Idl state not defined.");this.layout=It.typeDefLayout(t.state.struct,t.types)}async encode(t,e){const n=a.alloc(1e3),r=this.layout.encode(e,n),o=await Dt(t),i=n.slice(0,r);return a.concat([o,i])}decode(t){const e=t.slice(8);return this.layout.decode(e)}}async function Dt(t){let e=ht("anchor-deprecated-state")?"account":"state";return a.from(h.digest(`${e}:${t}`)).slice(0,8)}class Nt{constructor(t){if(void 0===t.types)return void(this.typeLayouts=new Map);const e=t.types.map((e=>[e.name,It.typeDefLayout(e,t.types)]));this.typeLayouts=new Map(e),this.idl=t}encode(t,e){const n=a.alloc(1e3),r=this.typeLayouts.get(t);if(!r)throw new Error(`Unknown type: ${t}`);const o=r.encode(e,n);return n.slice(0,o)}decode(t,e){const n=this.typeLayouts.get(t);if(!n)throw new Error(`Unknown type: ${t}`);return n.decode(e)}}class Ct{constructor(t){this.instruction=new xt(t),this.accounts=new Bt(t),this.events=new Pt(t),t.state&&(this.state=new Ut(t)),this.types=new Nt(t)}}var zt="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};class Rt{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}decode(t,e){throw new Error("Layout is abstract")}encode(t,e,n){throw new Error("Layout is abstract")}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}var jt=Rt;class Vt extends Rt{isCount(){throw new Error("ExternalLayout is abstract")}}class $t extends Vt{constructor(t,e,n){if(!(t instanceof Rt))throw new TypeError("layout must be a Layout");if(void 0===e)e=0;else if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,n||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof Ft||this.layout instanceof qt}decode(t,e){return void 0===e&&(e=0),this.layout.decode(t,e+this.offset)}encode(t,e,n){return void 0===n&&(n=0),this.layout.encode(t,e,n+this.offset)}}class Ft extends Rt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e){return void 0===e&&(e=0),t.readUIntLE(e,this.span)}encode(t,e,n){return void 0===n&&(n=0),e.writeUIntLE(t,n,this.span),this.span}}class qt extends Rt{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e){return void 0===e&&(e=0),t.readUIntBE(e,this.span)}encode(t,e,n){return void 0===n&&(n=0),e.writeUIntBE(t,n,this.span),this.span}}const Kt=Math.pow(2,32);function Gt(t){const e=Math.floor(t/Kt);return{hi32:e,lo32:t-e*Kt}}function Wt(t,e){return t*Kt+e}class Ht extends Rt{constructor(t){super(8,t)}decode(t,e){void 0===e&&(e=0);const n=t.readUInt32LE(e);return Wt(t.readUInt32LE(e+4),n)}encode(t,e,n){void 0===n&&(n=0);const r=Gt(t);return e.writeUInt32LE(r.lo32,n),e.writeUInt32LE(r.hi32,n+4),8}}class Jt extends Rt{constructor(t){super(8,t)}decode(t,e){void 0===e&&(e=0);const n=t.readUInt32LE(e);return Wt(t.readInt32LE(e+4),n)}encode(t,e,n){void 0===n&&(n=0);const r=Gt(t);return e.writeUInt32LE(r.lo32,n),e.writeInt32LE(r.hi32,n+4),8}}class Zt extends Rt{constructor(t,e,n){if(!Array.isArray(t)||!t.reduce(((t,e)=>t&&e instanceof Rt),!0))throw new TypeError("fields must be array of Layout instances");"boolean"==typeof e&&void 0===n&&(n=e,e=void 0);for(const e of t)if(0>e.span&&void 0===e.property)throw new Error("fields cannot contain unnamed variable-length layout");let r=-1;try{r=t.reduce(((t,e)=>t+e.getSpan()),0)}catch(t){}super(r,e),this.fields=t,this.decodePrefixes=!!n}getSpan(t,e){if(0<=this.span)return this.span;void 0===e&&(e=0);let n=0;try{n=this.fields.reduce(((n,r)=>{const o=r.getSpan(t,e);return e+=o,n+o}),0)}catch(t){throw new RangeError("indeterminate span")}return n}decode(t,e){void 0===e&&(e=0);const n=this.makeDestinationObject();for(const r of this.fields)if(void 0!==r.property&&(n[r.property]=r.decode(t,e)),e+=r.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return n}encode(t,e,n){void 0===n&&(n=0);const r=n;let o=0,i=0;for(const r of this.fields){let s=r.span;if(i=0<s?s:0,void 0!==r.property){const o=t[r.property];void 0!==o&&(i=r.encode(o,e,n),0>s&&(s=r.getSpan(e,n)))}o=n,n+=s}return o+i-r}fromArray(t){const e=this.makeDestinationObject();for(const n of this.fields)void 0!==n.property&&0<t.length&&(e[n.property]=t.shift());return e}layoutFor(t){if("string"!=typeof t)throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if("string"!=typeof t)throw new TypeError("property must be string");let e=0;for(const n of this.fields){if(n.property===t)return e;0>n.span?e=-1:0<=e&&(e+=n.span)}}}class Xt{constructor(t){this.property=t}decode(){throw new Error("UnionDiscriminator is abstract")}encode(){throw new Error("UnionDiscriminator is abstract")}}class Qt extends Xt{constructor(t,e){if(!(t instanceof Vt&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,n){return this.layout.encode(t,e,n)}}class Yt extends Rt{constructor(t,e,n){const r=t instanceof Ft||t instanceof qt;if(r)t=new Qt(new $t(t));else if(t instanceof Vt&&t.isCount())t=new Qt(t);else if(!(t instanceof Xt))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");if(void 0===e&&(e=null),!(null===e||e instanceof Rt))throw new TypeError("defaultLayout must be null or a Layout");if(null!==e){if(0>e.span)throw new Error("defaultLayout must have constant span");void 0===e.property&&(e=e.replicate("content"))}let o=-1;e&&(o=e.span,0<=o&&r&&(o+=t.layout.span)),super(o,n),this.discriminator=t,this.usesPrefixDiscriminator=r,this.defaultLayout=e,this.registry={};let i=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(t){return i(t)},this.configGetSourceVariant=function(t){i=t.bind(this)}}getSpan(t,e){if(0<=this.span)return this.span;void 0===e&&(e=0);const n=this.getVariant(t,e);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(t,e)}defaultGetSourceVariant(t){if(t.hasOwnProperty(this.discriminator.property)){if(this.defaultLayout&&t.hasOwnProperty(this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||t.hasOwnProperty(e.property)))return e}else for(const e in this.registry){const n=this.registry[e];if(t.hasOwnProperty(n.property))return n}throw new Error("unable to infer src variant")}decode(t,e){let n;void 0===e&&(e=0);const r=this.discriminator,o=r.decode(t,e);let i=this.registry[o];if(void 0===i){let s=0;i=this.defaultLayout,this.usesPrefixDiscriminator&&(s=r.layout.span),n=this.makeDestinationObject(),n[r.property]=o,n[i.property]=this.defaultLayout.decode(t,e+s)}else n=i.decode(t,e);return n}encode(t,e,n){void 0===n&&(n=0);const r=this.getSourceVariant(t);if(void 0===r){const r=this.discriminator,o=this.defaultLayout;let i=0;return this.usesPrefixDiscriminator&&(i=r.layout.span),r.encode(t[r.property],e,n),i+o.encode(t[o.property],e,n+i)}return r.encode(t,e,n)}addVariant(t,e,n){const r=new te(this,t,e,n);return this.registry[t]=r,r}getVariant(t,e){let n=t;return Buffer.isBuffer(t)&&(void 0===e&&(e=0),n=this.discriminator.decode(t,e)),this.registry[n]}}class te extends Rt{constructor(t,e,n,r){if(!(t instanceof Yt))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if("string"==typeof n&&void 0===r&&(r=n,n=null),n){if(!(n instanceof Rt))throw new TypeError("layout must be a Layout");if(null!==t.defaultLayout&&0<=n.span&&n.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if("string"!=typeof r)throw new TypeError("variant must have a String property")}let o=t.span;0>t.span&&(o=n?n.span:0,0<=o&&t.usesPrefixDiscriminator&&(o+=t.discriminator.layout.span)),super(o,r),this.union=t,this.variant=e,this.layout=n||null}getSpan(t,e){if(0<=this.span)return this.span;void 0===e&&(e=0);let n=0;return this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span),n+this.layout.getSpan(t,e+n)}decode(t,e){const n=this.makeDestinationObject();if(void 0===e&&(e=0),this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let r=0;return this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(t,e+r):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(t,e,n){void 0===n&&(n=0);let r=0;if(this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),this.layout&&!t.hasOwnProperty(this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,n);let o=r;if(this.layout&&(this.layout.encode(t[this.property],e,n+r),o+=this.layout.getSpan(e,n+r),0<=this.union.span&&o>this.union.span))throw new Error("encoded variant overruns containing union");return o}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}class ee extends Rt{constructor(t,e){if(!(t instanceof Vt&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;t instanceof Vt||(n=t),super(n,e),this.length=t}getSpan(t,e){let n=this.span;return 0>n&&(n=this.length.decode(t,e)),n}decode(t,e){void 0===e&&(e=0);let n=this.span;return 0>n&&(n=this.length.decode(t,e)),t.slice(e,e+n)}encode(t,e,n){let r=this.length;if(this.length instanceof Vt&&(r=t.length),!Buffer.isBuffer(t)||r!==t.length)throw new TypeError((o="Blob.encode",(this.property?o+"["+this.property+"]":o)+" requires (length "+r+") Buffer as src"));var o;if(n+r>e.length)throw new RangeError("encoding overruns Buffer");return e.write(t.toString("hex"),n,r,"hex"),this.length instanceof Vt&&this.length.encode(r,e,n),r}}var ne=(t,e,n)=>new $t(t,e,n),re=t=>new Ft(1,t),oe=t=>new Ft(4,t),ie=t=>new Ht(t),se=t=>new Jt(t),ae=(t,e,n)=>new Zt(t,e,n),ce=(t,e,n)=>new Yt(t,e,n),ue=(t,e)=>new ee(t,e);class le{constructor(t){}encode(e,n){switch(d(e)){case"initializeMint":return function({decimals:e,mintAuthority:n,freezeAuthority:r}){return fe({initializeMint:{decimals:e,mintAuthority:n.toBuffer(),freezeAuthorityOption:!!r,freezeAuthority:(r||t.default).toBuffer()}})}(n);case"initializeAccount":return fe({initializeAccount:{}});case"initializeMultisig":return function({m:t}){return fe({initializeMultisig:{m:t}})}(n);case"transfer":return function({amount:t}){return fe({transfer:{amount:t}})}(n);case"approve":return function({amount:t}){return fe({approve:{amount:t}})}(n);case"revoke":return fe({revoke:{}});case"setAuthority":return function({authorityType:t,newAuthority:e}){return fe({setAuthority:{authorityType:t,newAuthority:e}})}(n);case"mintTo":return function({amount:t}){return fe({mintTo:{amount:t}})}(n);case"burn":return function({amount:t}){return fe({burn:{amount:t}})}(n);case"closeAccount":return fe({closeAccount:{}});case"freezeAccount":return fe({freezeAccount:{}});case"thawAccount":return fe({thawAccount:{}});case"transferChecked":return function({amount:t,decimals:e}){return fe({transferChecked:{amount:t,decimals:e}})}(n);case"approvedChecked":return function({amount:t,decimals:e}){return fe({approveChecked:{amount:t,decimals:e}})}(n);case"mintToChecked":return function({amount:t,decimals:e}){return fe({mintToChecked:{amount:t,decimals:e}})}(n);case"burnChecked":return function({amount:t,decimals:e}){return fe({burnChecked:{amount:t,decimals:e}})}(n);case"intializeAccount2":return function({authority:t}){return fe({initilaizeAccount2:{authority:t}})}(n);case"syncNative":return fe({syncNative:{}});case"initializeAccount3":return function({authority:t}){return fe({initializeAccount3:{authority:t}})}(n);case"initializeMultisig2":return function({m:t}){return fe({initializeMultisig2:{m:t}})}(n);case"initializeMint2":return function({decimals:t,mintAuthority:e,freezeAuthority:n}){return fe({encodeInitializeMint2:{decimals:t,mintAuthority:e,freezeAuthority:n}})}(n);default:throw new Error(`Invalid instruction: ${e}`)}}encodeState(t,e){throw new Error("SPL token does not have state")}}const de=ce(re("instruction"));function he(t){return ue(32,t)}function fe(t){let e=Buffer.alloc(pe),n=de.encode(t,e);return e.slice(0,n)}de.addVariant(0,ae([re("decimals"),ue(32,"mintAuthority"),re("freezeAuthorityOption"),he("freezeAuthority")]),"initializeMint"),de.addVariant(1,ae([]),"initializeAccount"),de.addVariant(2,ae([re("m")]),"initializeMultisig"),de.addVariant(3,ae([ie("amount")]),"transfer"),de.addVariant(4,ae([ie("amount")]),"approve"),de.addVariant(5,ae([]),"revoke"),de.addVariant(6,ae([re("authorityType"),re("newAuthorityOption"),he("newAuthority")]),"setAuthority"),de.addVariant(7,ae([ie("amount")]),"mintTo"),de.addVariant(8,ae([ie("amount")]),"burn"),de.addVariant(9,ae([]),"closeAccount"),de.addVariant(10,ae([]),"freezeAccount"),de.addVariant(11,ae([]),"thawAccount"),de.addVariant(12,ae([ie("amount"),re("decimals")]),"transferChecked"),de.addVariant(13,ae([ie("amount"),re("decimals")]),"approvedChecked"),de.addVariant(14,ae([ie("amount"),re("decimals")]),"mintToChecked"),de.addVariant(15,ae([ie("amount"),re("decimals")]),"burnedChecked"),de.addVariant(16,ae([he("authority")]),"InitializeAccount2"),de.addVariant(17,ae([]),"syncNative"),de.addVariant(18,ae([he("authority")]),"initializeAccount3"),de.addVariant(19,ae([re("m")]),"initializeMultisig2"),de.addVariant(20,ae([re("decimals"),he("mintAuthority"),re("freezeAuthorityOption"),he("freezeAuthority")]),"initializeMint2");const pe=Math.max(...Object.values(de.registry).map((t=>t.span)));class me{constructor(t){}encode(t,e){throw new Error("SPL token does not have state")}decode(t){throw new Error("SPL token does not have state")}}function ye(t){return new ve(ue(8),(t=>Ee.fromBuffer(t)),(t=>t.toBuffer()),t)}function ge(e){return new ve(ue(32),(e=>new t(e)),(t=>t.toBuffer()),e)}function we(t,e){return new be(t,e)}class ve extends jt{constructor(t,e,n,r){super(t.span,r),this.layout=t,this.decoder=e,this.encoder=n}decode(t,e){return this.decoder(this.layout.decode(t,e))}encode(t,e,n){return this.layout.encode(this.encoder(t),e,n)}getSpan(t,e){return this.layout.getSpan(t,e)}}class be extends jt{constructor(t,e){super(-1,e),this.layout=t,this.discriminator=oe()}encode(t,e,n=0){return null==t?this.layout.span+this.discriminator.encode(0,e,n):(this.discriminator.encode(1,e,n),this.layout.encode(t,e,n+4)+4)}decode(t,e=0){const n=this.discriminator.decode(t,e);if(0===n)return null;if(1===n)return this.layout.decode(t,e+4);throw new Error("Invalid coption "+this.layout.property)}getSpan(t,e=0){return this.layout.getSpan(t,e+4)+4}}class Ee extends c{toBuffer(){const t=super.toArray().reverse(),e=Buffer.from(t);if(8===e.length)return e;if(e.length>=8)throw new Error("u64 too large");const n=Buffer.alloc(8);return e.copy(n),n}static fromBuffer(t){if(8!==t.length)throw new Error(`Invalid buffer length: ${t.length}`);return new Ee([...t].reverse().map((t=>`00${t.toString(16)}`.slice(-2))).join(""),16)}}class Ae{constructor(t){this.idl=t}async encode(t,e){switch(t){case"token":{const t=Buffer.alloc(165),n=Se.encode(e,t);return t.slice(0,n)}case"mint":{const t=Buffer.alloc(82),n=_e.encode(e,t);return t.slice(0,n)}default:throw new Error(`Invalid account name: ${t}`)}}decode(t,e){return this.decodeUnchecked(t,e)}decodeUnchecked(t,e){switch(t){case"token":return function(t){return Se.decode(t)}(e);case"mint":return function(t){return _e.decode(t)}(e);default:throw new Error(`Invalid account name: ${t}`)}}memcmp(t,e){switch(t){case"token":return{dataSize:165};case"mint":return{dataSize:82};default:throw new Error(`Invalid account name: ${t}`)}}size(t){var e;return null!==(e=Tt(this.idl,t))&&void 0!==e?e:0}}const _e=ae([we(ge(),"mintAuthority"),ye("supply"),re("decimals"),("isInitialized",new ve(re(),(function(t){if(0===t)return!1;if(1===t)return!0;throw new Error("Invalid bool: "+t)}),(function(t){return t?1:0}),"isInitialized")),we(ge(),"freezeAuthority")]);const Se=ae([ge("mint"),ge("authority"),ye("amount"),we(ge(),"delegate"),re("state"),we(ye(),"isNative"),ye("delegatedAmount"),we(ge(),"closeAuthority")]);class Ie{constructor(t){}decode(t){throw new Error("SPL token program does not have events")}}class xe{constructor(t){}encode(t,e){throw new Error("SPL token does not have user-defined types")}decode(t,e){throw new Error("SPL token does not have user-defined types")}}class ke{constructor(t){this.instruction=new le(t),this.accounts=new Ae(t),this.events=new Ie(t),this.state=new me(t),this.types=new xe(t)}}class Le extends jt{constructor(t){super(-1,t),this.property=t,this.layout=ae([oe("length"),oe("lengthPadding"),ue(ne(oe(),-8),"chars")],this.property)}encode(t,e,n=0){if(null==t)return this.layout.span;const r={chars:Buffer.from(t,"utf8")};return this.layout.encode(r,e,n)}decode(t,e=0){return this.layout.decode(t,e).chars.toString()}getSpan(t,e=0){return oe().span+oe().span+new c(new Uint8Array(t).slice(e,e+4),10,"le").toNumber()}}function Te(t){return new Le(t)}function Oe(t){return ue(32,t)}const Be=ce(oe("instruction"));Be.addVariant(0,ae([se("lamports"),se("space"),Oe("owner")]),"createAccount"),Be.addVariant(1,ae([Oe("owner")]),"assign"),Be.addVariant(2,ae([se("lamports")]),"transfer"),Be.addVariant(3,ae([Oe("base"),Te("seed"),se("lamports"),se("space"),Oe("owner")]),"createAccountWithSeed"),Be.addVariant(4,ae([Oe("authorized")]),"advanceNonceAccount"),Be.addVariant(5,ae([se("lamports")]),"withdrawNonceAccount"),Be.addVariant(6,ae([Oe("authorized")]),"initializeNonceAccount"),Be.addVariant(7,ae([Oe("authorized")]),"authorizeNonceAccount"),Be.addVariant(8,ae([se("space")]),"allocate"),Be.addVariant(9,ae([Oe("base"),Te("seed"),se("space"),Oe("owner")]),"allocateWithSeed"),Be.addVariant(10,ae([Oe("base"),Te("seed"),Oe("owner")]),"assignWithSeed"),Be.addVariant(11,ae([se("lamports"),Te("seed"),Oe("owner")]),"transferWithSeed"),Math.max(...Object.values(Be.registry).map((t=>t.span)));class Pe extends jt{constructor(t,e,n,r){super(t.span,r),this.layout=t,this.decoder=e,this.encoder=n}decode(t,e){return this.decoder(this.layout.decode(t,e))}encode(t,e,n){return this.layout.encode(this.encoder(t),e,n)}getSpan(t,e){return this.layout.getSpan(t,e)}}function Me(e){return new Pe(ue(32),(e=>new t(e)),(t=>t.toBuffer()),e)}ae([oe("version"),oe("state"),Me("authorizedPubkey"),Me("nonce"),ae([ie("lamportsPerSignature")],"feeCalculator")]);var Ue=Object.freeze({__proto__:null,hash:function(t){return h(t)}});function De(e,n,r){const o=a.concat([e.toBuffer(),a.from(n),r.toBuffer()]),i=h.digest(o);return new t(a.from(i))}function Ne(e,n){let r=a.alloc(0);e.forEach((function(t){if(t.length>32)throw new TypeError("Max seed length exceeded");r=a.concat([r,ze(t)])})),r=a.concat([r,n.toBuffer(),a.from("ProgramDerivedAddress")]);let o=h(new Uint8Array(r)),i=new c(o,16).toArray(void 0,32);if(t.isOnCurve(new Uint8Array(i)))throw new Error("Invalid seeds, address must fall off the curve");return new t(i)}function Ce(t,e){let n,r=255;for(;0!=r;){try{n=Ne(t.concat(a.from([r])),e)}catch(t){if(t instanceof TypeError)throw t;r--;continue}return[n,r]}throw new Error("Unable to find a viable program address nonce")}const ze=t=>t instanceof a?t:t instanceof Uint8Array?a.from(t.buffer,t.byteOffset,t.byteLength):a.from(t);async function Re(e,...n){let r=[a.from([97,110,99,104,111,114])];n.forEach((t=>{r.push(t instanceof a?t:T(t).toBuffer())}));const[o]=await t.findProgramAddress(r,T(e));return o}var je=Object.freeze({__proto__:null,createWithSeedSync:De,createProgramAddressSync:Ne,findProgramAddressSync:Ce,associated:Re});const Ve=new t("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA"),$e=new t("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL");var Fe=Object.freeze({__proto__:null,TOKEN_PROGRAM_ID:Ve,ASSOCIATED_PROGRAM_ID:$e,associatedAddress:async function({mint:e,owner:n}){return(await t.findProgramAddress([n.toBuffer(),Ve.toBuffer(),e.toBuffer()],$e))[0]}}),qe={exports:{}};!function(t,e){var n="undefined"!=typeof self?self:zt,r=function(){function t(){this.fetch=!1,this.DOMException=n.DOMException}return t.prototype=n,new t}();!function(t){!function(e){var n="URLSearchParams"in t,r="Symbol"in t&&"iterator"in Symbol,o="FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(t){return!1}}(),i="FormData"in t,s="ArrayBuffer"in t;if(s)var a=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(t){return t&&a.indexOf(Object.prototype.toString.call(t))>-1};function u(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function l(t){return"string"!=typeof t&&(t=String(t)),t}function d(t){var e={next:function(){var e=t.shift();return{done:void 0===e,value:e}}};return r&&(e[Symbol.iterator]=function(){return e}),e}function h(t){this.map={},t instanceof h?t.forEach((function(t,e){this.append(e,t)}),this):Array.isArray(t)?t.forEach((function(t){this.append(t[0],t[1])}),this):t&&Object.getOwnPropertyNames(t).forEach((function(e){this.append(e,t[e])}),this)}function f(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function p(t){return new Promise((function(e,n){t.onload=function(){e(t.result)},t.onerror=function(){n(t.error)}}))}function m(t){var e=new FileReader,n=p(e);return e.readAsArrayBuffer(t),n}function y(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function g(){return this.bodyUsed=!1,this._initBody=function(t){var e;this._bodyInit=t,t?"string"==typeof t?this._bodyText=t:o&&Blob.prototype.isPrototypeOf(t)?this._bodyBlob=t:i&&FormData.prototype.isPrototypeOf(t)?this._bodyFormData=t:n&&URLSearchParams.prototype.isPrototypeOf(t)?this._bodyText=t.toString():s&&o&&(e=t)&&DataView.prototype.isPrototypeOf(e)?(this._bodyArrayBuffer=y(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s&&(ArrayBuffer.prototype.isPrototypeOf(t)||c(t))?this._bodyArrayBuffer=y(t):this._bodyText=t=Object.prototype.toString.call(t):this._bodyText="",this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},o&&(this.blob=function(){var t=f(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?f(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(m)}),this.text=function(){var t=f(this);if(t)return t;if(this._bodyBlob)return function(t){var e=new FileReader,n=p(e);return e.readAsText(t),n}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},i&&(this.formData=function(){return this.text().then(b)}),this.json=function(){return this.text().then(JSON.parse)},this}h.prototype.append=function(t,e){t=u(t),e=l(e);var n=this.map[t];this.map[t]=n?n+", "+e:e},h.prototype.delete=function(t){delete this.map[u(t)]},h.prototype.get=function(t){return t=u(t),this.has(t)?this.map[t]:null},h.prototype.has=function(t){return this.map.hasOwnProperty(u(t))},h.prototype.set=function(t,e){this.map[u(t)]=l(e)},h.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},h.prototype.keys=function(){var t=[];return this.forEach((function(e,n){t.push(n)})),d(t)},h.prototype.values=function(){var t=[];return this.forEach((function(e){t.push(e)})),d(t)},h.prototype.entries=function(){var t=[];return this.forEach((function(e,n){t.push([n,e])})),d(t)},r&&(h.prototype[Symbol.iterator]=h.prototype.entries);var w=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function v(t,e){var n,r,o=(e=e||{}).body;if(t instanceof v){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new h(t.headers)),this.method=t.method,this.mode=t.mode,this.signal=t.signal,o||null==t._bodyInit||(o=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"same-origin",!e.headers&&this.headers||(this.headers=new h(e.headers)),this.method=(r=(n=e.method||this.method||"GET").toUpperCase(),w.indexOf(r)>-1?r:n),this.mode=e.mode||this.mode||null,this.signal=e.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o)}function b(t){var e=new FormData;return t.trim().split("&").forEach((function(t){if(t){var n=t.split("="),r=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");e.append(decodeURIComponent(r),decodeURIComponent(o))}})),e}function E(t,e){e||(e={}),this.type="default",this.status=void 0===e.status?200:e.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new h(e.headers),this.url=e.url||"",this._initBody(t)}v.prototype.clone=function(){return new v(this,{body:this._bodyInit})},g.call(v.prototype),g.call(E.prototype),E.prototype.clone=function(){return new E(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new h(this.headers),url:this.url})},E.error=function(){var t=new E(null,{status:0,statusText:""});return t.type="error",t};var A=[301,302,303,307,308];E.redirect=function(t,e){if(-1===A.indexOf(e))throw new RangeError("Invalid status code");return new E(null,{status:e,headers:{location:t}})},e.DOMException=t.DOMException;try{new e.DOMException}catch(t){e.DOMException=function(t,e){this.message=t,this.name=e;var n=Error(t);this.stack=n.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function _(t,n){return new Promise((function(r,i){var s=new v(t,n);if(s.signal&&s.signal.aborted)return i(new e.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function c(){a.abort()}a.onload=function(){var t,e,n={status:a.status,statusText:a.statusText,headers:(t=a.getAllResponseHeaders()||"",e=new h,t.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(t){var n=t.split(":"),r=n.shift().trim();if(r){var o=n.join(":").trim();e.append(r,o)}})),e)};n.url="responseURL"in a?a.responseURL:n.headers.get("X-Request-URL");var o="response"in a?a.response:a.responseText;r(new E(o,n))},a.onerror=function(){i(new TypeError("Network request failed"))},a.ontimeout=function(){i(new TypeError("Network request failed"))},a.onabort=function(){i(new e.DOMException("Aborted","AbortError"))},a.open(s.method,s.url,!0),"include"===s.credentials?a.withCredentials=!0:"omit"===s.credentials&&(a.withCredentials=!1),"responseType"in a&&o&&(a.responseType="blob"),s.headers.forEach((function(t,e){a.setRequestHeader(e,t)})),s.signal&&(s.signal.addEventListener("abort",c),a.onreadystatechange=function(){4===a.readyState&&s.signal.removeEventListener("abort",c)}),a.send(void 0===s._bodyInit?null:s._bodyInit)}))}_.polyfill=!0,t.fetch||(t.fetch=_,t.Headers=h,t.Request=v,t.Response=E),e.Headers=h,e.Request=v,e.Response=E,e.fetch=_,Object.defineProperty(e,"__esModule",{value:!0})}({})}(r),r.fetch.ponyfill=!0,delete r.fetch.polyfill;var o=r;(e=o.fetch).default=o.fetch,e.fetch=o.fetch,e.Headers=o.Headers,e.Request=o.Request,e.Response=o.Response,t.exports=e}(qe,qe.exports);var Ke=function(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}(qe.exports);async function Ge(t,e){const n=await t.getAccountInfo(e);if(null===n)throw new Error("program account not found");const{program:r}=He(n.data),o=await t.getAccountInfo(r.programdataAddress);if(null===o)throw new Error("program data account not found");const{programData:i}=He(o.data);return i}const We=f.rustEnum([f.struct([],"uninitialized"),f.struct([f.option(f.publicKey(),"authorityAddress")],"buffer"),f.struct([f.publicKey("programdataAddress")],"program"),f.struct([f.u64("slot"),f.option(f.publicKey(),"upgradeAuthorityAddress")],"programData")],void 0,f.u32());function He(t){return We.decode(t)}var Je=Object.freeze({__proto__:null,verifiedBuild:async function(t,e,n=5){const r=`https://api.apr.dev/api/v0/program/${e.toString()}/latest?limit=${n}`,[o,i]=await Promise.all([Ge(t,e),Ke(r)]),s=(await i.json()).filter((t=>!t.aborted&&"Built"===t.state&&"Verified"===t.verified));if(0===s.length)return null;const a=s[0];return o.slot.toNumber()!==a.verified_slot?null:a},fetchData:Ge,decodeUpgradeableLoaderState:He});Object.freeze({__proto__:null,sha256:Ue,rpc:rt,publicKey:je,bytes:I,token:Fe,features:ft,registry:Je});const Ze=f.struct([f.publicKey("authority"),f.vecU8("data")]);function Xe(t,e){var n,r;let o={};const i=t.args?t.args.length:0;if(e.length>i){if(e.length!==i+1)throw new Error(`provided too many arguments ${e} to instruction ${null==t?void 0:t.name} expecting: ${null!==(r=null===(n=t.args)||void 0===n?void 0:n.map((t=>t.name)))&&void 0!==r?r:[]}`);o=e.pop()}return[e,o]}class Qe{static build(t,e,r){if("_inner"===t.name)throw new pt("the _inner name is reserved");const o=(...i)=>{const[s,a]=Xe(t,[...i]);L(t.accounts,a.accounts);const c=o.accounts(a.accounts);return void 0!==a.remainingAccounts&&c.push(...a.remainingAccounts),ht("debug-logs")&&console.log("Outgoing account metas:",c),new n({keys:c,programId:r,data:e(t.name,k(t,...s))})};return o.accounts=e=>Qe.accountsArray(e,t.accounts,t.name),o}static accountsArray(t,e,n){return t?e.map((e=>{if(void 0!==("accounts"in e?e.accounts:void 0)){const r=t[e.name];return Qe.accountsArray(r,e.accounts,n).flat()}{const r=e;let o;try{o=T(t[e.name])}catch(t){throw new Error(`Wrong input type for account "${e.name}" in the instruction accounts object${void 0!==n?' for instruction "'+n+'"':""}. Expected PublicKey or string.`)}return{pubkey:o,isWritable:r.isMut,isSigner:r.isSigner}}})).flat():[]}}class Ye{static build(t,e,n,r){return async(...o)=>{var i;const s=e(...o),[,a]=Xe(t,[...o]);if(void 0===r.sendAndConfirm)throw new Error("This function requires 'Provider.sendAndConfirm' to be implemented.");try{return await r.sendAndConfirm(s,null!==(i=a.signers)&&void 0!==i?i:[],a.options)}catch(t){throw wt(t,n)}}}}class tn{static build(t,n){return(...r)=>{var o,i,s;const[,a]=Xe(t,[...r]),c=new e;if(a.preInstructions&&a.instructions)throw new Error("instructions is deprecated, use preInstructions");return null===(o=a.preInstructions)||void 0===o||o.forEach((t=>c.add(t))),null===(i=a.instructions)||void 0===i||i.forEach((t=>c.add(t))),c.add(n(...r)),null===(s=a.postInstructions)||void 0===s||s.forEach((t=>c.add(t))),c}}}class en{constructor(t,e,n=ct(),r=new Ct(t)){this.provider=n,this.coder=r,this._idl=t,this._programId=e,this._address=nn(e),this._sub=null;const[o,s,a]=(()=>{var o;let s={},a={},c={};return null===(o=t.state)||void 0===o||o.methods.forEach((o=>{const u=Qe.build(o,((t,e)=>r.instruction.encodeState(t,e)),e);u.accounts=t=>{const r=function(t,e,n,r){if("new"===n.name){const[n]=Ce([],t);if(void 0===e.wallet)throw new Error("This function requires the Provider interface implementor to have a 'wallet' field.");return[{pubkey:e.wallet.publicKey,isWritable:!1,isSigner:!0},{pubkey:nn(t),isWritable:!0,isSigner:!1},{pubkey:n,isWritable:!1,isSigner:!1},{pubkey:i.programId,isWritable:!1,isSigner:!1},{pubkey:t,isWritable:!1,isSigner:!1}]}return L(n.accounts,r),[{pubkey:nn(t),isWritable:!0,isSigner:!1}]}(e,n,o,t);return r.concat(Qe.accountsArray(t,o.accounts,o.name))};const l=tn.build(o,u),h=Ye.build(o,l,x(t),n),f=d(o.name);s[f]=u,a[f]=l,c[f]=h})),[s,a,c]})();this.instruction=o,this.transaction=s,this.rpc=a}get programId(){return this._programId}async fetch(){const t=this.address(),e=await this.provider.connection.getAccountInfo(t);if(null===e)throw new Error(`Account does not exist ${t.toString()}`);const n=this._idl.state;if(!n)throw new Error("State is not specified in IDL.");if((await Dt(n.struct.name)).compare(e.data.slice(0,8)))throw new Error("Invalid account discriminator");return this.coder.state.decode(e.data)}address(){return this._address}subscribe(t){if(null!==this._sub)return this._sub.ee;const e=new m,n=this.provider.connection.onAccountChange(this.address(),(t=>{const n=this.coder.state.decode(t.data);e.emit("change",n)}),t);return this._sub={ee:e,listener:n},e}unsubscribe(){null!==this._sub&&this.provider.connection.removeAccountChangeListener(this._sub.listener).then((async()=>{this._sub=null})).catch(console.error)}}function nn(t){let[e]=Ce([],t);return De(e,"unversioned",t)}class rn{constructor(t,e,n,r,o){this._idlAccount=e,this._programId=n,this._provider=null!=r?r:ct(),this._coder=null!=o?o:new Ct(t),this._size=this._coder.accounts.size(e)}get size(){return this._size}get programId(){return this._programId}get provider(){return this._provider}get coder(){return this._coder}async fetchNullable(t,e){const n=await this.getAccountInfo(t,e);return null===n?null:this._coder.accounts.decode(this._idlAccount.name,n.data)}async fetch(t,e){const n=await this.fetchNullable(t,e);if(null===n)throw new Error(`Account does not exist ${t.toString()}`);return n}async fetchMultiple(t,e){return(await Z(this._provider.connection,t.map((t=>T(t))),e)).map((t=>null==t?null:this._coder.accounts.decode(this._idlAccount.name,null==t?void 0:t.account.data)))}async all(t){return(await this._provider.connection.getProgramAccounts(this._programId,{commitment:this._provider.connection.commitment,filters:[{memcmp:this.coder.accounts.memcmp(this._idlAccount.name,t instanceof Buffer?t:void 0)},...Array.isArray(t)?t:[]]})).map((({pubkey:t,account:e})=>({publicKey:t,account:this._coder.accounts.decode(this._idlAccount.name,e.data)})))}subscribe(t,e){const n=on.get(t.toString());if(n)return n.ee;const r=new m;t=T(t);const o=this._provider.connection.onAccountChange(t,(t=>{const e=this._coder.accounts.decode(this._idlAccount.name,t.data);r.emit("change",e)}),e);return on.set(t.toString(),{ee:r,listener:o}),r}async unsubscribe(t){let e=on.get(t.toString());e?on&&await this._provider.connection.removeAccountChangeListener(e.listener).then((()=>{on.delete(t.toString())})).catch(console.error):console.warn("Address is not subscribed")}async createInstruction(t,e){const n=this.size;if(void 0===this._provider.wallet)throw new Error("This function requires the Provider interface implementor to have a 'wallet' field.");return i.createAccount({fromPubkey:this._provider.wallet.publicKey,newAccountPubkey:t.publicKey,space:null!=e?e:n,lamports:await this._provider.connection.getMinimumBalanceForRentExemption(null!=e?e:n),programId:this._programId})}async associated(...t){const e=await this.associatedAddress(...t);return await this.fetch(e)}async associatedAddress(...t){return await Re(this._programId,...t)}async getAccountInfo(t,e){return await this._provider.connection.getAccountInfo(T(t),e)}}const on=new Map,sn="Program log: ".length,an="Program data: ".length;class cn{constructor(t,e,n){this._programId=t,this._provider=e,this._eventParser=new un(t,n),this._eventCallbacks=new Map,this._eventListeners=new Map,this._listenerIdCount=0}addEventListener(t,e){var n;let r=this._listenerIdCount;return this._listenerIdCount+=1,t in this._eventCallbacks||this._eventListeners.set(t,[]),this._eventListeners.set(t,(null!==(n=this._eventListeners.get(t))&&void 0!==n?n:[]).concat(r)),this._eventCallbacks.set(r,[t,e]),void 0!==this._onLogsSubscriptionId||(this._onLogsSubscriptionId=this._provider.connection.onLogs(this._programId,((t,e)=>{if(!t.err)for(const n of this._eventParser.parseLogs(t.logs)){const r=this._eventListeners.get(n.name);r&&r.forEach((r=>{const o=this._eventCallbacks.get(r);if(o){const[,r]=o;r(n.data,e.slot,t.signature)}}))}}))),r}async removeEventListener(t){const e=this._eventCallbacks.get(t);if(!e)throw new Error(`Event listener ${t} doesn't exist!`);const[n]=e;let r=this._eventListeners.get(n);if(!r)throw new Error(`Event listeners don't exist for ${n}!`);this._eventCallbacks.delete(t),r=r.filter((e=>e!==t)),0===r.length&&this._eventListeners.delete(n),0==this._eventCallbacks.size&&(y.ok(0===this._eventListeners.size),void 0!==this._onLogsSubscriptionId&&(await this._provider.connection.removeOnLogsListener(this._onLogsSubscriptionId),this._onLogsSubscriptionId=void 0))}}class un{constructor(t,e){this.coder=e,this.programId=t}*parseLogs(t){const e=new dn(t),n=new ln;let r=e.next();for(;null!==r;){let[t,o,i]=this.handleLog(n,r);t&&(yield t),o&&n.push(o),i&&n.pop(),r=e.next()}}handleLog(t,e){return t.stack.length>0&&t.program()===this.programId.toString()?this.handleProgramLog(e):[null,...this.handleSystemLog(e)]}handleProgramLog(t){if(t.startsWith("Program log: ")||t.startsWith("Program data: ")){const e=t.startsWith("Program log: ")?t.slice(sn):t.slice(an);return[this.coder.events.decode(e),null,!1]}return[null,...this.handleSystemLog(t)]}handleSystemLog(t){const e=t.split(":")[0];return null!==e.match(/^Program (.*) success/g)?[null,!0]:e.startsWith(`Program ${this.programId.toString()} invoke`)?[this.programId.toString(),!1]:e.includes("invoke")?["cpi",!1]:[null,!1]}}class ln{constructor(){this.stack=[]}program(){return y.ok(this.stack.length>0),this.stack[this.stack.length-1]}push(t){this.stack.push(t)}pop(){y.ok(this.stack.length>0),this.stack.pop()}}class dn{constructor(t){this.logs=t}next(){if(0===this.logs.length)return null;let t=this.logs[0];return this.logs=this.logs.slice(1),t}}new t("TokenkegQfeZyiNwAJbNbGKPFXCWuBvf9Ss623VQ5DA");const hn={version:"0.1.0",name:"spl_token",instructions:[{name:"initializeMint",accounts:[{name:"mint",isMut:!0,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"decimals",type:"u8"},{name:"mintAuthority",type:"publicKey"},{name:"freezeAuthority",type:{coption:"publicKey"}}]},{name:"initializeAccount",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[]},{name:"initializeMultisig",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"m",type:"u8"}]},{name:"transfer",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"destination",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"}]},{name:"approve",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"delegate",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"}]},{name:"revoke",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[]},{name:"setAuthority",accounts:[{name:"mint",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"authorityType",type:"u8"},{name:"newAuthority",type:{coption:"publicKey"}}]},{name:"mintTo",accounts:[{name:"mint",isMut:!0,isSigner:!1},{name:"to",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"}]},{name:"burn",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"mint",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"}]},{name:"closeAccount",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"destination",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!1}],args:[]},{name:"freezeAccount",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[]},{name:"thawAccount",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[]},{name:"transferChecked",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"destination",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"},{name:"decimals",type:"u8"}]},{name:"approveChecked",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"delegate",isMut:!1,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"},{name:"decimals",type:"u8"}]},{name:"mintToChecked",accounts:[{name:"mint",isMut:!0,isSigner:!1},{name:"to",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"},{name:"decimals",type:"u8"}]},{name:"burnChecked",accounts:[{name:"source",isMut:!0,isSigner:!1},{name:"mint",isMut:!0,isSigner:!1},{name:"authority",isMut:!1,isSigner:!0}],args:[{name:"amount",type:"u64"},{name:"decimals",type:"u8"}]},{name:"initializeAccount2",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1},{name:"rent",isMut:!1,isSigner:!1}],args:[{name:"authority",type:"publicKey"}]},{name:"syncNative",accounts:[{name:"account",isMut:!0,isSigner:!1}],args:[]},{name:"initializeAccount3",accounts:[{name:"account",isMut:!0,isSigner:!1},{name:"mint",isMut:!1,isSigner:!1}],args:[{name:"authority",type:"publicKey"}]},{name:"initializeMultisig2",accounts:[{name:"account",isMut:!0,isSigner:!1}],args:[{name:"m",type:"u8"}]},{name:"initializeMint2",accounts:[{name:"mint",isMut:!0,isSigner:!1}],args:[{name:"decimals",type:"u8"},{name:"mintAuthority",type:"publicKey"},{name:"freezeAuthority",type:{coption:"publicKey"}}]}],accounts:[{name:"mint",type:{kind:"struct",fields:[{name:"mintAuthority",type:{coption:"publicKey"}},{name:"supply",type:"u64"},{name:"decimals",type:"u8"},{name:"isInitialized",type:"bool"},{name:"freezeAuthority",type:{coption:"publicKey"}}]}},{name:"token",type:{kind:"struct",fields:[{name:"mint",type:"publicKey"},{name:"authority",type:"publicKey"},{name:"amount",type:"u64"},{name:"delegate",type:{coption:"publicKey"}},{name:"state",type:"u8"},{name:"isNative",type:{coption:"u64"}},{name:"delegatedAmount",type:"u64"},{name:"closeAuthority",type:{coption:"publicKey"}}]}}]};class fn{constructor(t,e,n,r,o,i){this._args=t,this._accounts=e,this._provider=n,this._programId=r,this._idlIx=o,this._accountStore=new pn(n,i)}async resolve(){for(let t=0;t<this._idlIx.accounts.length;t+=1){const e=this._idlIx.accounts[t],n=d(e.name);if(!e.isSigner||this._accounts[n])Reflect.has(fn.CONST_ACCOUNTS,n)&&!this._accounts[n]&&(this._accounts[n]=fn.CONST_ACCOUNTS[n]);else{if(void 0===this._provider.wallet)throw new Error("This function requires the Provider interface implementor to have a 'wallet' field.");this._accounts[n]=this._provider.wallet.publicKey}}for(let t=0;t<this._idlIx.accounts.length;t+=1){const e=this._idlIx.accounts[t],n=d(e.name);e.pda&&e.pda.seeds.length>0&&!this._accounts[n]&&await this.autoPopulatePda(e)}}async autoPopulatePda(e){if(!e.pda||!e.pda.seeds)throw new Error("Must have seeds");const n=await Promise.all(e.pda.seeds.map((t=>this.toBuffer(t)))),r=await this.parseProgramId(e),[o]=await t.findProgramAddress(n,r);this._accounts[d(e.name)]=o}async parseProgramId(e){var n;if(!(null===(n=e.pda)||void 0===n?void 0:n.programId))return this._programId;switch(e.pda.programId.kind){case"const":return new t(this.toBufferConst(e.pda.programId.value));case"arg":return this.argValue(e.pda.programId);case"account":return await this.accountValue(e.pda.programId);default:throw new Error(`Unexpected program seed kind: ${e.pda.programId.kind}`)}}async toBuffer(t){switch(t.kind){case"const":return this.toBufferConst(t);case"arg":return await this.toBufferArg(t);case"account":return await this.toBufferAccount(t);default:throw new Error(`Unexpected seed kind: ${t.kind}`)}}toBufferConst(t){return this.toBufferValue(t.type,t.value)}async toBufferArg(t){const e=this.argValue(t);return this.toBufferValue(t.type,e)}argValue(t){const e=d(t.path.split(".")[0]),n=this._idlIx.args.findIndex((t=>t.name===e));if(-1===n)throw new Error(`Unable to find argument for seed: ${e}`);return this._args[n]}async toBufferAccount(t){const e=await this.accountValue(t);return this.toBufferValue(t.type,e)}async accountValue(t){const e=t.path.split("."),n=e[0],r=this._accounts[d(n)];if(1===e.length)return r;const o=await this._accountStore.fetchAccount(t.account,r);return this.parseAccountValue(o,e.slice(1))}parseAccountValue(t,e){let n;for(;e.length>0;)n=t[d(e[0])],e=e.slice(1);return n}toBufferValue(t,e){switch(t){case"u8":return Buffer.from([e]);case"u16":let n=Buffer.alloc(2);return n.writeUInt16LE(e),n;case"u32":let r=Buffer.alloc(4);return r.writeUInt32LE(e),r;case"u64":let o=Buffer.alloc(8);return o.writeBigUInt64LE(BigInt(e)),o;case"string":return Buffer.from(v(e));case"publicKey":return e.toBuffer();default:if(t.array)return Buffer.from(e);throw new Error(`Unexpected seed type: ${t}`)}}}fn.CONST_ACCOUNTS={associatedTokenProgram:$e,rent:o,systemProgram:i.programId,tokenProgram:Ve};class pn{constructor(t,e){this._provider=t,this._accounts=e,this._cache=new Map}async fetchAccount(t,e){const n=e.toString();if(!this._cache.has(n))if("TokenAccount"===t){const t=await this._provider.connection.getAccountInfo(e);if(null===t)throw new Error(`invalid account info for ${n}`);const r=new ke(hn).accounts.decode("token",t.data);this._cache.set(n,r)}else{const r=this._accounts[d(t)].fetch(e);this._cache.set(n,r)}return this._cache.get(n)}}class mn{static build(t,e,n,r,o,i,s,a,c){return(...u)=>new yn(u,r,o,i,s,a,t,e,n,c)}}class yn{constructor(t,e,n,r,o,i,s,a,c,u){this._args=t,this._ixFn=e,this._txFn=n,this._rpcFn=r,this._simulateFn=o,this._viewFn=i,this._accounts={},this._remainingAccounts=[],this._signers=[],this._preInstructions=[],this._postInstructions=[],this._autoResolveAccounts=!0,this._accountsResolver=new fn(t,this._accounts,s,a,c,u)}async pubkeys(){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._accounts}accounts(t){return this._autoResolveAccounts=!0,Object.assign(this._accounts,t),this}accountsStrict(t){return this._autoResolveAccounts=!1,Object.assign(this._accounts,t),this}signers(t){return this._signers=this._signers.concat(t),this}remainingAccounts(t){return this._remainingAccounts=this._remainingAccounts.concat(t),this}preInstructions(t){return this._preInstructions=this._preInstructions.concat(t),this}postInstructions(t){return this._postInstructions=this._postInstructions.concat(t),this}async rpc(t){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._rpcFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:t})}async view(t){if(this._autoResolveAccounts&&await this._accountsResolver.resolve(),!this._viewFn)throw new Error("Method does not support views");return this._viewFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:t})}async simulate(t){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._simulateFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions,options:t})}async instruction(){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._ixFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}async transaction(){return this._autoResolveAccounts&&await this._accountsResolver.resolve(),this._txFn(...this._args,{accounts:this._accounts,signers:this._signers,remainingAccounts:this._remainingAccounts,preInstructions:this._preInstructions,postInstructions:this._postInstructions})}}class gn{constructor(t,e,n,r){e=T(e),n||(n=ct()),this._idl=t,this._provider=n,this._programId=e,this._coder=null!=r?r:new Ct(t),this._events=new cn(this._programId,n,this._coder);const[o,i,s,a,c,u,l,h]=class{static build(t,e,n,r){const o={},i={},s={},a={},c={},u={},l=x(t),h=t.accounts?class{static build(t,e,n,r){var o;const i={};return null===(o=t.accounts)||void 0===o||o.forEach((o=>{const s=d(o.name);i[s]=new rn(t,o,n,r,e)})),i}}.build(t,e,n,r):{},f=class{static build(t,e,n,r){if(void 0!==t.state)return new en(t,n,r,e)}}.build(t,e,n,r);return t.instructions.forEach((f=>{const p=Qe.build(f,((t,n)=>e.instruction.encode(t,n)),n),m=tn.build(f,p),y=Ye.build(f,m,l,r),g=class{static build(t,e,n,r,o,i,s){return async(...a)=>{var c;const u=e(...a),[,l]=Xe(t,[...a]);let d;if(void 0===r.simulate)throw new Error("This function requires 'Provider.simulate' to be implemented.");try{d=await r.simulate(u,l.signers,null===(c=l.options)||void 0===c?void 0:c.commitment)}catch(t){throw wt(t,n)}if(void 0===d)throw new Error("Unable to simulate transaction");const h=d.logs;if(!h)throw new Error("Simulated logs not found");const f=[];if(s.events){let t=new un(i,o);for(const e of t.parseLogs(h))f.push(e)}return{events:f,raw:h}}}}.build(f,m,l,r,e,n,t),w=class{static build(t,e,n,r){const o=e.accounts.find((t=>t.isMut)),i=!!e.returns;if(!o&&i)return async(...o)=>{var i,s;let a=await n(...o);const c=`Program return: ${t} `;let u=a.raw.find((t=>t.startsWith(c)));if(!u)throw new Error("View expected return log");let l=_(u.slice(c.length)),d=e.returns;if(!d)throw new Error("View expected return type");return It.fieldLayout({type:d},Array.from([...null!==(i=r.accounts)&&void 0!==i?i:[],...null!==(s=r.types)&&void 0!==s?s:[]])).decode(l)}}}.build(n,f,g,t),v=mn.build(r,n,f,p,m,y,g,w,h),b=d(f.name);i[b]=p,s[b]=m,o[b]=y,a[b]=g,c[b]=v,w&&(u[b]=w)})),[o,i,s,h,a,c,f,u]}}.build(t,this._coder,e,n);this.rpc=o,this.instruction=i,this.transaction=s,this.account=a,this.simulate=c,this.methods=u,this.state=l,this.views=h}get programId(){return this._programId}get idl(){return this._idl}get coder(){return this._coder}get provider(){return this._provider}static async at(t,e){const n=T(t),r=await gn.fetchIdl(n,e);if(!r)throw new Error(`IDL not found for program: ${t.toString()}`);return new gn(r,n,e)}static async fetchIdl(e,n){n=null!=n?n:ct();const r=T(e),o=await async function(e){const n=(await t.findProgramAddress([],e))[0];return await t.createWithSeed(n,"anchor:idl",e)}(r),i=await n.connection.getAccountInfo(o);if(!i)return null;let s=(a=i.data.slice(8),Ze.decode(a));var a;const c=p(s.data);return JSON.parse(w(c))}addEventListener(t,e){return this._events.addEventListener(t,e)}async removeEventListener(t){return await this._events.removeEventListener(t)}}new t("ATokenGPvbdGVxr1b2hvZbsiqW5xWH25efTNsLJA8knL"),new t("11111111111111111111111111111111");var wn={};Object.defineProperty(wn,"__esModule",{value:!0}),wn.s16=wn.s8=wn.nu64be=wn.u48be=wn.u40be=wn.u32be=wn.u24be=wn.u16be=wn.nu64=wn.u48=wn.u40=or=wn.u32=wn.u24=wn.u16=rr=wn.u8=wn.offset=wn.greedy=wn.Constant=wn.UTF8=wn.CString=wn.Blob=wn.Boolean=wn.BitField=wn.BitStructure=wn.VariantLayout=wn.Union=wn.UnionLayoutDiscriminator=wn.UnionDiscriminator=wn.Structure=wn.Sequence=wn.DoubleBE=wn.Double=wn.FloatBE=wn.Float=wn.NearInt64BE=wn.NearInt64=wn.NearUInt64BE=wn.NearUInt64=wn.IntBE=wn.Int=wn.UIntBE=wn.UInt=wn.OffsetLayout=wn.GreedyCount=wn.ExternalLayout=wn.bindConstructorLayout=wn.nameWithProperty=wn.Layout=wn.uint8ArrayToBuffer=wn.checkUint8Array=void 0,wn.constant=wn.utf8=wn.cstr=cr=wn.blob=wn.unionLayoutDiscriminator=wn.union=sr=wn.seq=wn.bits=ir=wn.struct=wn.f64be=wn.f64=wn.f32be=wn.f32=wn.ns64be=wn.s48be=wn.s40be=wn.s32be=wn.s24be=wn.s16be=wn.ns64=wn.s48=wn.s40=wn.s32=wn.s24=void 0;const vn=s;function bn(t){if(!(t instanceof Uint8Array))throw new TypeError("b must be a Uint8Array")}function En(t){return bn(t),vn.Buffer.from(t.buffer,t.byteOffset,t.length)}wn.checkUint8Array=bn,wn.uint8ArrayToBuffer=En;class An{constructor(t,e){if(!Number.isInteger(t))throw new TypeError("span must be an integer");this.span=t,this.property=e}makeDestinationObject(){return{}}getSpan(t,e){if(0>this.span)throw new RangeError("indeterminate span");return this.span}replicate(t){const e=Object.create(this.constructor.prototype);return Object.assign(e,this),e.property=t,e}fromArray(t){}}var _n=wn.Layout=An;function Sn(t,e){return e.property?t+"["+e.property+"]":t}wn.nameWithProperty=Sn,wn.bindConstructorLayout=function(t,e){if("function"!=typeof t)throw new TypeError("Class must be constructor");if(Object.prototype.hasOwnProperty.call(t,"layout_"))throw new Error("Class is already bound to a layout");if(!(e&&e instanceof An))throw new TypeError("layout must be a Layout");if(Object.prototype.hasOwnProperty.call(e,"boundConstructor_"))throw new Error("layout is already bound to a constructor");t.layout_=e,e.boundConstructor_=t,e.makeDestinationObject=()=>new t,Object.defineProperty(t.prototype,"encode",{value(t,n){return e.encode(this,t,n)},writable:!0}),Object.defineProperty(t,"decode",{value:(t,n)=>e.decode(t,n),writable:!0})};class In extends An{isCount(){throw new Error("ExternalLayout is abstract")}}wn.ExternalLayout=In;class xn extends In{constructor(t=1,e){if(!Number.isInteger(t)||0>=t)throw new TypeError("elementSpan must be a (positive) integer");super(-1,e),this.elementSpan=t}isCount(){return!0}decode(t,e=0){bn(t);const n=t.length-e;return Math.floor(n/this.elementSpan)}encode(t,e,n){return 0}}wn.GreedyCount=xn;class kn extends In{constructor(t,e=0,n){if(!(t instanceof An))throw new TypeError("layout must be a Layout");if(!Number.isInteger(e))throw new TypeError("offset must be integer or undefined");super(t.span,n||t.property),this.layout=t,this.offset=e}isCount(){return this.layout instanceof Ln||this.layout instanceof Tn}decode(t,e=0){return this.layout.decode(t,e+this.offset)}encode(t,e,n=0){return this.layout.encode(t,e,n+this.offset)}}wn.OffsetLayout=kn;class Ln extends An{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return En(t).readUIntLE(e,this.span)}encode(t,e,n=0){return En(e).writeUIntLE(t,n,this.span),this.span}}wn.UInt=Ln;class Tn extends An{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return En(t).readUIntBE(e,this.span)}encode(t,e,n=0){return En(e).writeUIntBE(t,n,this.span),this.span}}wn.UIntBE=Tn;class On extends An{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return En(t).readIntLE(e,this.span)}encode(t,e,n=0){return En(e).writeIntLE(t,n,this.span),this.span}}wn.Int=On;class Bn extends An{constructor(t,e){if(super(t,e),6<this.span)throw new RangeError("span must not exceed 6 bytes")}decode(t,e=0){return En(t).readIntBE(e,this.span)}encode(t,e,n=0){return En(e).writeIntBE(t,n,this.span),this.span}}wn.IntBE=Bn;const Pn=Math.pow(2,32);function Mn(t){const e=Math.floor(t/Pn);return{hi32:e,lo32:t-e*Pn}}function Un(t,e){return t*Pn+e}class Dn extends An{constructor(t){super(8,t)}decode(t,e=0){const n=En(t),r=n.readUInt32LE(e);return Un(n.readUInt32LE(e+4),r)}encode(t,e,n=0){const r=Mn(t),o=En(e);return o.writeUInt32LE(r.lo32,n),o.writeUInt32LE(r.hi32,n+4),8}}wn.NearUInt64=Dn;class Nn extends An{constructor(t){super(8,t)}decode(t,e=0){const n=En(t);return Un(n.readUInt32BE(e),n.readUInt32BE(e+4))}encode(t,e,n=0){const r=Mn(t),o=En(e);return o.writeUInt32BE(r.hi32,n),o.writeUInt32BE(r.lo32,n+4),8}}wn.NearUInt64BE=Nn;class Cn extends An{constructor(t){super(8,t)}decode(t,e=0){const n=En(t),r=n.readUInt32LE(e);return Un(n.readInt32LE(e+4),r)}encode(t,e,n=0){const r=Mn(t),o=En(e);return o.writeUInt32LE(r.lo32,n),o.writeInt32LE(r.hi32,n+4),8}}wn.NearInt64=Cn;class zn extends An{constructor(t){super(8,t)}decode(t,e=0){const n=En(t);return Un(n.readInt32BE(e),n.readUInt32BE(e+4))}encode(t,e,n=0){const r=Mn(t),o=En(e);return o.writeInt32BE(r.hi32,n),o.writeUInt32BE(r.lo32,n+4),8}}wn.NearInt64BE=zn;class Rn extends An{constructor(t){super(4,t)}decode(t,e=0){return En(t).readFloatLE(e)}encode(t,e,n=0){return En(e).writeFloatLE(t,n),4}}wn.Float=Rn;class jn extends An{constructor(t){super(4,t)}decode(t,e=0){return En(t).readFloatBE(e)}encode(t,e,n=0){return En(e).writeFloatBE(t,n),4}}wn.FloatBE=jn;class Vn extends An{constructor(t){super(8,t)}decode(t,e=0){return En(t).readDoubleLE(e)}encode(t,e,n=0){return En(e).writeDoubleLE(t,n),8}}wn.Double=Vn;class $n extends An{constructor(t){super(8,t)}decode(t,e=0){return En(t).readDoubleBE(e)}encode(t,e,n=0){return En(e).writeDoubleBE(t,n),8}}wn.DoubleBE=$n;class Fn extends An{constructor(t,e,n){if(!(t instanceof An))throw new TypeError("elementLayout must be a Layout");if(!(e instanceof In&&e.isCount()||Number.isInteger(e)&&0<=e))throw new TypeError("count must be non-negative integer or an unsigned integer ExternalLayout");let r=-1;!(e instanceof In)&&0<t.span&&(r=e*t.span),super(r,n),this.elementLayout=t,this.count=e}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0,r=this.count;if(r instanceof In&&(r=r.decode(t,e)),0<this.elementLayout.span)n=r*this.elementLayout.span;else{let o=0;for(;o<r;)n+=this.elementLayout.getSpan(t,e+n),++o}return n}decode(t,e=0){const n=[];let r=0,o=this.count;for(o instanceof In&&(o=o.decode(t,e));r<o;)n.push(this.elementLayout.decode(t,e)),e+=this.elementLayout.getSpan(t,e),r+=1;return n}encode(t,e,n=0){const r=this.elementLayout,o=t.reduce(((t,o)=>t+r.encode(o,e,n+t)),0);return this.count instanceof In&&this.count.encode(t.length,e,n),o}}wn.Sequence=Fn;class qn extends An{constructor(t,e,n){if(!Array.isArray(t)||!t.reduce(((t,e)=>t&&e instanceof An),!0))throw new TypeError("fields must be array of Layout instances");"boolean"==typeof e&&void 0===n&&(n=e,e=void 0);for(const e of t)if(0>e.span&&void 0===e.property)throw new Error("fields cannot contain unnamed variable-length layout");let r=-1;try{r=t.reduce(((t,e)=>t+e.getSpan()),0)}catch(t){}super(r,e),this.fields=t,this.decodePrefixes=!!n}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0;try{n=this.fields.reduce(((n,r)=>{const o=r.getSpan(t,e);return e+=o,n+o}),0)}catch(t){throw new RangeError("indeterminate span")}return n}decode(t,e=0){bn(t);const n=this.makeDestinationObject();for(const r of this.fields)if(void 0!==r.property&&(n[r.property]=r.decode(t,e)),e+=r.getSpan(t,e),this.decodePrefixes&&t.length===e)break;return n}encode(t,e,n=0){const r=n;let o=0,i=0;for(const r of this.fields){let s=r.span;if(i=0<s?s:0,void 0!==r.property){const o=t[r.property];void 0!==o&&(i=r.encode(o,e,n),0>s&&(s=r.getSpan(e,n)))}o=n,n+=s}return o+i-r}fromArray(t){const e=this.makeDestinationObject();for(const n of this.fields)void 0!==n.property&&0<t.length&&(e[n.property]=t.shift());return e}layoutFor(t){if("string"!=typeof t)throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}offsetOf(t){if("string"!=typeof t)throw new TypeError("property must be string");let e=0;for(const n of this.fields){if(n.property===t)return e;0>n.span?e=-1:0<=e&&(e+=n.span)}}}wn.Structure=qn;class Kn{constructor(t){this.property=t}decode(t,e){throw new Error("UnionDiscriminator is abstract")}encode(t,e,n){throw new Error("UnionDiscriminator is abstract")}}wn.UnionDiscriminator=Kn;class Gn extends Kn{constructor(t,e){if(!(t instanceof In&&t.isCount()))throw new TypeError("layout must be an unsigned integer ExternalLayout");super(e||t.property||"variant"),this.layout=t}decode(t,e){return this.layout.decode(t,e)}encode(t,e,n){return this.layout.encode(t,e,n)}}wn.UnionLayoutDiscriminator=Gn;class Wn extends An{constructor(t,e,n){let r;if(t instanceof Ln||t instanceof Tn)r=new Gn(new kn(t));else if(t instanceof In&&t.isCount())r=new Gn(t);else{if(!(t instanceof Kn))throw new TypeError("discr must be a UnionDiscriminator or an unsigned integer layout");r=t}if(void 0===e&&(e=null),!(null===e||e instanceof An))throw new TypeError("defaultLayout must be null or a Layout");if(null!==e){if(0>e.span)throw new Error("defaultLayout must have constant span");void 0===e.property&&(e=e.replicate("content"))}let o=-1;e&&(o=e.span,0<=o&&(t instanceof Ln||t instanceof Tn)&&(o+=r.layout.span)),super(o,n),this.discriminator=r,this.usesPrefixDiscriminator=t instanceof Ln||t instanceof Tn,this.defaultLayout=e,this.registry={};let i=this.defaultGetSourceVariant.bind(this);this.getSourceVariant=function(t){return i(t)},this.configGetSourceVariant=function(t){i=t.bind(this)}}getSpan(t,e=0){if(0<=this.span)return this.span;const n=this.getVariant(t,e);if(!n)throw new Error("unable to determine span for unrecognized variant");return n.getSpan(t,e)}defaultGetSourceVariant(t){if(Object.prototype.hasOwnProperty.call(t,this.discriminator.property)){if(this.defaultLayout&&this.defaultLayout.property&&Object.prototype.hasOwnProperty.call(t,this.defaultLayout.property))return;const e=this.registry[t[this.discriminator.property]];if(e&&(!e.layout||e.property&&Object.prototype.hasOwnProperty.call(t,e.property)))return e}else for(const e in this.registry){const n=this.registry[e];if(n.property&&Object.prototype.hasOwnProperty.call(t,n.property))return n}throw new Error("unable to infer src variant")}decode(t,e=0){let n;const r=this.discriminator,o=r.decode(t,e),i=this.registry[o];if(void 0===i){const i=this.defaultLayout;let s=0;this.usesPrefixDiscriminator&&(s=r.layout.span),n=this.makeDestinationObject(),n[r.property]=o,n[i.property]=i.decode(t,e+s)}else n=i.decode(t,e);return n}encode(t,e,n=0){const r=this.getSourceVariant(t);if(void 0===r){const r=this.discriminator,o=this.defaultLayout;let i=0;return this.usesPrefixDiscriminator&&(i=r.layout.span),r.encode(t[r.property],e,n),i+o.encode(t[o.property],e,n+i)}return r.encode(t,e,n)}addVariant(t,e,n){const r=new Hn(this,t,e,n);return this.registry[t]=r,r}getVariant(t,e=0){let n;return n=t instanceof Uint8Array?this.discriminator.decode(t,e):t,this.registry[n]}}wn.Union=Wn;class Hn extends An{constructor(t,e,n,r){if(!(t instanceof Wn))throw new TypeError("union must be a Union");if(!Number.isInteger(e)||0>e)throw new TypeError("variant must be a (non-negative) integer");if("string"==typeof n&&void 0===r&&(r=n,n=null),n){if(!(n instanceof An))throw new TypeError("layout must be a Layout");if(null!==t.defaultLayout&&0<=n.span&&n.span>t.defaultLayout.span)throw new Error("variant span exceeds span of containing union");if("string"!=typeof r)throw new TypeError("variant must have a String property")}let o=t.span;0>t.span&&(o=n?n.span:0,0<=o&&t.usesPrefixDiscriminator&&(o+=t.discriminator.layout.span)),super(o,r),this.union=t,this.variant=e,this.layout=n||null}getSpan(t,e=0){if(0<=this.span)return this.span;let n=0;this.union.usesPrefixDiscriminator&&(n=this.union.discriminator.layout.span);let r=0;return this.layout&&(r=this.layout.getSpan(t,e+n)),n+r}decode(t,e=0){const n=this.makeDestinationObject();if(this!==this.union.getVariant(t,e))throw new Error("variant mismatch");let r=0;return this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),this.layout?n[this.property]=this.layout.decode(t,e+r):this.property?n[this.property]=!0:this.union.usesPrefixDiscriminator&&(n[this.union.discriminator.property]=this.variant),n}encode(t,e,n=0){let r=0;if(this.union.usesPrefixDiscriminator&&(r=this.union.discriminator.layout.span),this.layout&&!Object.prototype.hasOwnProperty.call(t,this.property))throw new TypeError("variant lacks property "+this.property);this.union.discriminator.encode(this.variant,e,n);let o=r;if(this.layout&&(this.layout.encode(t[this.property],e,n+r),o+=this.layout.getSpan(e,n+r),0<=this.union.span&&o>this.union.span))throw new Error("encoded variant overruns containing union");return o}fromArray(t){if(this.layout)return this.layout.fromArray(t)}}function Jn(t){return 0>t&&(t+=4294967296),t}wn.VariantLayout=Hn;class Zn extends An{constructor(t,e,n){if(!(t instanceof Ln||t instanceof Tn))throw new TypeError("word must be a UInt or UIntBE layout");if("string"==typeof e&&void 0===n&&(n=e,e=!1),4<t.span)throw new RangeError("word cannot exceed 32 bits");super(t.span,n),this.word=t,this.msb=!!e,this.fields=[];let r=0;this._packedSetValue=function(t){return r=Jn(t),this},this._packedGetValue=function(){return r}}decode(t,e=0){const n=this.makeDestinationObject(),r=this.word.decode(t,e);this._packedSetValue(r);for(const e of this.fields)void 0!==e.property&&(n[e.property]=e.decode(t));return n}encode(t,e,n=0){const r=this.word.decode(e,n);this._packedSetValue(r);for(const e of this.fields)if(void 0!==e.property){const n=t[e.property];void 0!==n&&e.encode(n)}return this.word.encode(this._packedGetValue(),e,n)}addField(t,e){const n=new Xn(this,t,e);return this.fields.push(n),n}addBoolean(t){const e=new Qn(this,t);return this.fields.push(e),e}fieldFor(t){if("string"!=typeof t)throw new TypeError("property must be string");for(const e of this.fields)if(e.property===t)return e}}wn.BitStructure=Zn;class Xn{constructor(t,e,n){if(!(t instanceof Zn))throw new TypeError("container must be a BitStructure");if(!Number.isInteger(e)||0>=e)throw new TypeError("bits must be positive integer");const r=8*t.span,o=t.fields.reduce(((t,e)=>t+e.bits),0);if(e+o>r)throw new Error("bits too long for span remainder ("+(r-o)+" of "+r+" remain)");this.container=t,this.bits=e,this.valueMask=(1<<e)-1,32===e&&(this.valueMask=4294967295),this.start=o,this.container.msb&&(this.start=r-o-e),this.wordMask=Jn(this.valueMask<<this.start),this.property=n}decode(t,e){return Jn(this.container._packedGetValue()&this.wordMask)>>>this.start}encode(t){if("number"!=typeof t||!Number.isInteger(t)||t!==Jn(t&this.valueMask))throw new TypeError(Sn("BitField.encode",this)+" value must be integer not exceeding "+this.valueMask);const e=this.container._packedGetValue(),n=Jn(t<<this.start);this.container._packedSetValue(Jn(e&~this.wordMask)|n)}}wn.BitField=Xn;class Qn extends Xn{constructor(t,e){super(t,1,e)}decode(t,e){return!!super.decode(t,e)}encode(t){"boolean"==typeof t&&(t=+t),super.encode(t)}}wn.Boolean=Qn;class Yn extends An{constructor(t,e){if(!(t instanceof In&&t.isCount()||Number.isInteger(t)&&0<=t))throw new TypeError("length must be positive integer or an unsigned integer ExternalLayout");let n=-1;t instanceof In||(n=t),super(n,e),this.length=t}getSpan(t,e){let n=this.span;return 0>n&&(n=this.length.decode(t,e)),n}decode(t,e=0){let n=this.span;return 0>n&&(n=this.length.decode(t,e)),En(t).slice(e,e+n)}encode(t,e,n){let r=this.length;if(this.length instanceof In&&(r=t.length),!(t instanceof Uint8Array&&r===t.length))throw new TypeError(Sn("Blob.encode",this)+" requires (length "+r+") Uint8Array as src");if(n+r>e.length)throw new RangeError("encoding overruns Uint8Array");const o=En(t);return En(e).write(o.toString("hex"),n,r,"hex"),this.length instanceof In&&this.length.encode(r,e,n),r}}wn.Blob=Yn;class tr extends An{constructor(t){super(-1,t)}getSpan(t,e=0){bn(t);let n=e;for(;n<t.length&&0!==t[n];)n+=1;return 1+n-e}decode(t,e=0){const n=this.getSpan(t,e);return En(t).slice(e,e+n-1).toString("utf-8")}encode(t,e,n=0){"string"!=typeof t&&(t=String(t));const r=vn.Buffer.from(t,"utf8"),o=r.length;if(n+o>e.length)throw new RangeError("encoding overruns Buffer");const i=En(e);return r.copy(i,n),i[n+o]=0,o+1}}wn.CString=tr;class er extends An{constructor(t,e){if("string"==typeof t&&void 0===e&&(e=t,t=void 0),void 0===t)t=-1;else if(!Number.isInteger(t))throw new TypeError("maxSpan must be an integer");super(-1,e),this.maxSpan=t}getSpan(t,e=0){return bn(t),t.length-e}decode(t,e=0){const n=this.getSpan(t,e);if(0<=this.maxSpan&&this.maxSpan<n)throw new RangeError("text length exceeds maxSpan");return En(t).slice(e,e+n).toString("utf-8")}encode(t,e,n=0){"string"!=typeof t&&(t=String(t));const r=vn.Buffer.from(t,"utf8"),o=r.length;if(0<=this.maxSpan&&this.maxSpan<o)throw new RangeError("text length exceeds maxSpan");if(n+o>e.length)throw new RangeError("encoding overruns Buffer");return r.copy(En(e),n),o}}wn.UTF8=er;class nr extends An{constructor(t,e){super(0,e),this.value=t}decode(t,e){return this.value}encode(t,e,n){return 0}}wn.Constant=nr,wn.greedy=(t,e)=>new xn(t,e),wn.offset=(t,e,n)=>new kn(t,e,n);var rr=wn.u8=t=>new Ln(1,t);wn.u16=t=>new Ln(2,t),wn.u24=t=>new Ln(3,t);var or=wn.u32=t=>new Ln(4,t);wn.u40=t=>new Ln(5,t),wn.u48=t=>new Ln(6,t),wn.nu64=t=>new Dn(t),wn.u16be=t=>new Tn(2,t),wn.u24be=t=>new Tn(3,t),wn.u32be=t=>new Tn(4,t),wn.u40be=t=>new Tn(5,t),wn.u48be=t=>new Tn(6,t),wn.nu64be=t=>new Nn(t),wn.s8=t=>new On(1,t),wn.s16=t=>new On(2,t),wn.s24=t=>new On(3,t),wn.s32=t=>new On(4,t),wn.s40=t=>new On(5,t),wn.s48=t=>new On(6,t),wn.ns64=t=>new Cn(t),wn.s16be=t=>new Bn(2,t),wn.s24be=t=>new Bn(3,t),wn.s32be=t=>new Bn(4,t),wn.s40be=t=>new Bn(5,t),wn.s48be=t=>new Bn(6,t),wn.ns64be=t=>new zn(t),wn.f32=t=>new Rn(t),wn.f32be=t=>new jn(t),wn.f64=t=>new Vn(t),wn.f64be=t=>new $n(t);var ir=wn.struct=(t,e,n)=>new qn(t,e,n);wn.bits=(t,e,n)=>new Zn(t,e,n);var sr=wn.seq=(t,e,n)=>new Fn(t,e,n),ar=wn.union=(t,e,n)=>new Wn(t,e,n);wn.unionLayoutDiscriminator=(t,e)=>new Gn(t,e);var cr=wn.blob=(t,e)=>new Yn(t,e);wn.cstr=t=>new tr(t),wn.utf8=(t,e)=>new er(t,e),wn.constant=(t,e)=>new nr(t,e);const ur=t=>({decode:t.decode.bind(t),encode:t.encode.bind(t)});var lr={};Object.defineProperty(lr,"__esModule",{value:!0}),lr.toBigIntLE=function(t){{const e=Buffer.from(t);e.reverse();const n=e.toString("hex");return 0===n.length?BigInt(0):BigInt(`0x${n}`)}},lr.toBigIntBE=function(t){{const e=t.toString("hex");return 0===e.length?BigInt(0):BigInt(`0x${e}`)}},lr.toBufferLE=function(t,e){{const n=t.toString(16),r=Buffer.from(n.padStart(2*e,"0").slice(0,2*e),"hex");return r.reverse(),r}},lr.toBufferBE=function(t,e){{const n=t.toString(16);return Buffer.from(n.padStart(2*e,"0").slice(0,2*e),"hex")}};var dr=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,hr=Math.ceil,fr=Math.floor,pr="[BigNumber Error] ",mr=pr+"Number primitive has more than 15 significant digits: ",yr=1e14,gr=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],wr=1e9;function vr(t){var e=0|t;return t>0||t===e?e:e-1}function br(t){for(var e,n,r=1,o=t.length,i=t[0]+"";r<o;){for(n=14-(e=t[r++]+"").length;n--;e="0"+e);i+=e}for(o=i.length;48===i.charCodeAt(--o););return i.slice(0,o+1||1)}function Er(t,e){var n,r,o=t.c,i=e.c,s=t.s,a=e.s,c=t.e,u=e.e;if(!s||!a)return null;if(n=o&&!o[0],r=i&&!i[0],n||r)return n?r?0:-a:s;if(s!=a)return s;if(n=s<0,r=c==u,!o||!i)return r?0:!o^n?1:-1;if(!r)return c>u^n?1:-1;for(a=(c=o.length)<(u=i.length)?c:u,s=0;s<a;s++)if(o[s]!=i[s])return o[s]>i[s]^n?1:-1;return c==u?0:c>u^n?1:-1}function Ar(t,e,n,r){if(t<e||t>n||t!==fr(t))throw Error(pr+(r||"Argument")+("number"==typeof t?t<e||t>n?" out of range: ":" not an integer: ":" not a primitive number: ")+String(t))}function _r(t){var e=t.c.length-1;return vr(t.e/14)==e&&t.c[e]%2!=0}function Sr(t,e){return(t.length>1?t.charAt(0)+"."+t.slice(1):t)+(e<0?"e":"e+")+e}function Ir(t,e,n){var r,o;if(e<0){for(o=n+".";++e;o+=n);t=o+t}else if(++e>(r=t.length)){for(o=n,e-=r;--e;o+=n);t+=o}else e<r&&(t=t.slice(0,e)+"."+t.slice(e));return t}var xr=function t(e){var n,r,o,i,s,a,c,u,l,d,h=x.prototype={constructor:x,toString:null,valueOf:null},f=new x(1),p=20,m=4,y=-7,g=21,w=-1e7,v=1e7,b=!1,E=1,A=0,_={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},S="0123456789abcdefghijklmnopqrstuvwxyz",I=!0;function x(t,e){var n,i,s,a,c,u,l,d,h=this;if(!(h instanceof x))return new x(t,e);if(null==e){if(t&&!0===t._isBigNumber)return h.s=t.s,void(!t.c||t.e>v?h.c=h.e=null:t.e<w?h.c=[h.e=0]:(h.e=t.e,h.c=t.c.slice()));if((u="number"==typeof t)&&0*t==0){if(h.s=1/t<0?(t=-t,-1):1,t===~~t){for(a=0,c=t;c>=10;c/=10,a++);return void(a>v?h.c=h.e=null:(h.e=a,h.c=[t]))}d=String(t)}else{if(!dr.test(d=String(t)))return o(h,d,u);h.s=45==d.charCodeAt(0)?(d=d.slice(1),-1):1}(a=d.indexOf("."))>-1&&(d=d.replace(".","")),(c=d.search(/e/i))>0?(a<0&&(a=c),a+=+d.slice(c+1),d=d.substring(0,c)):a<0&&(a=d.length)}else{if(Ar(e,2,S.length,"Base"),10==e&&I)return O(h=new x(t),p+h.e+1,m);if(d=String(t),u="number"==typeof t){if(0*t!=0)return o(h,d,u,e);if(h.s=1/t<0?(d=d.slice(1),-1):1,x.DEBUG&&d.replace(/^0\.0*|\./,"").length>15)throw Error(mr+t)}else h.s=45===d.charCodeAt(0)?(d=d.slice(1),-1):1;for(n=S.slice(0,e),a=c=0,l=d.length;c<l;c++)if(n.indexOf(i=d.charAt(c))<0){if("."==i){if(c>a){a=l;continue}}else if(!s&&(d==d.toUpperCase()&&(d=d.toLowerCase())||d==d.toLowerCase()&&(d=d.toUpperCase()))){s=!0,c=-1,a=0;continue}return o(h,String(t),u,e)}u=!1,(a=(d=r(d,e,10,h.s)).indexOf("."))>-1?d=d.replace(".",""):a=d.length}for(c=0;48===d.charCodeAt(c);c++);for(l=d.length;48===d.charCodeAt(--l););if(d=d.slice(c,++l)){if(l-=c,u&&x.DEBUG&&l>15&&(t>9007199254740991||t!==fr(t)))throw Error(mr+h.s*t);if((a=a-c-1)>v)h.c=h.e=null;else if(a<w)h.c=[h.e=0];else{if(h.e=a,h.c=[],c=(a+1)%14,a<0&&(c+=14),c<l){for(c&&h.c.push(+d.slice(0,c)),l-=14;c<l;)h.c.push(+d.slice(c,c+=14));c=14-(d=d.slice(c)).length}else c-=l;for(;c--;d+="0");h.c.push(+d)}}else h.c=[h.e=0]}function k(t,e,n,r){var o,i,s,a,c;if(null==n?n=m:Ar(n,0,8),!t.c)return t.toString();if(o=t.c[0],s=t.e,null==e)c=br(t.c),c=1==r||2==r&&(s<=y||s>=g)?Sr(c,s):Ir(c,s,"0");else if(i=(t=O(new x(t),e,n)).e,a=(c=br(t.c)).length,1==r||2==r&&(e<=i||i<=y)){for(;a<e;c+="0",a++);c=Sr(c,i)}else if(e-=s,c=Ir(c,i,"0"),i+1>a){if(--e>0)for(c+=".";e--;c+="0");}else if((e+=i-a)>0)for(i+1==a&&(c+=".");e--;c+="0");return t.s<0&&o?"-"+c:c}function L(t,e){for(var n,r=1,o=new x(t[0]);r<t.length;r++){if(!(n=new x(t[r])).s){o=n;break}e.call(o,n)&&(o=n)}return o}function T(t,e,n){for(var r=1,o=e.length;!e[--o];e.pop());for(o=e[0];o>=10;o/=10,r++);return(n=r+14*n-1)>v?t.c=t.e=null:n<w?t.c=[t.e=0]:(t.e=n,t.c=e),t}function O(t,e,n,r){var o,i,s,a,c,u,l,d=t.c,h=gr;if(d){t:{for(o=1,a=d[0];a>=10;a/=10,o++);if((i=e-o)<0)i+=14,s=e,l=(c=d[u=0])/h[o-s-1]%10|0;else if((u=hr((i+1)/14))>=d.length){if(!r)break t;for(;d.length<=u;d.push(0));c=l=0,o=1,s=(i%=14)-14+1}else{for(c=a=d[u],o=1;a>=10;a/=10,o++);l=(s=(i%=14)-14+o)<0?0:c/h[o-s-1]%10|0}if(r=r||e<0||null!=d[u+1]||(s<0?c:c%h[o-s-1]),r=n<4?(l||r)&&(0==n||n==(t.s<0?3:2)):l>5||5==l&&(4==n||r||6==n&&(i>0?s>0?c/h[o-s]:0:d[u-1])%10&1||n==(t.s<0?8:7)),e<1||!d[0])return d.length=0,r?(e-=t.e+1,d[0]=h[(14-e%14)%14],t.e=-e||0):d[0]=t.e=0,t;if(0==i?(d.length=u,a=1,u--):(d.length=u+1,a=h[14-i],d[u]=s>0?fr(c/h[o-s]%h[s])*a:0),r)for(;;){if(0==u){for(i=1,s=d[0];s>=10;s/=10,i++);for(s=d[0]+=a,a=1;s>=10;s/=10,a++);i!=a&&(t.e++,d[0]==yr&&(d[0]=1));break}if(d[u]+=a,d[u]!=yr)break;d[u--]=0,a=1}for(i=d.length;0===d[--i];d.pop());}t.e>v?t.c=t.e=null:t.e<w&&(t.c=[t.e=0])}return t}function B(t){var e,n=t.e;return null===n?t.toString():(e=br(t.c),e=n<=y||n>=g?Sr(e,n):Ir(e,n,"0"),t.s<0?"-"+e:e)}return x.clone=t,x.ROUND_UP=0,x.ROUND_DOWN=1,x.ROUND_CEIL=2,x.ROUND_FLOOR=3,x.ROUND_HALF_UP=4,x.ROUND_HALF_DOWN=5,x.ROUND_HALF_EVEN=6,x.ROUND_HALF_CEIL=7,x.ROUND_HALF_FLOOR=8,x.EUCLID=9,x.config=x.set=function(t){var e,n;if(null!=t){if("object"!=typeof t)throw Error(pr+"Object expected: "+t);if(t.hasOwnProperty(e="DECIMAL_PLACES")&&(Ar(n=t[e],0,wr,e),p=n),t.hasOwnProperty(e="ROUNDING_MODE")&&(Ar(n=t[e],0,8,e),m=n),t.hasOwnProperty(e="EXPONENTIAL_AT")&&((n=t[e])&&n.pop?(Ar(n[0],-wr,0,e),Ar(n[1],0,wr,e),y=n[0],g=n[1]):(Ar(n,-wr,wr,e),y=-(g=n<0?-n:n))),t.hasOwnProperty(e="RANGE"))if((n=t[e])&&n.pop)Ar(n[0],-wr,-1,e),Ar(n[1],1,wr,e),w=n[0],v=n[1];else{if(Ar(n,-wr,wr,e),!n)throw Error(pr+e+" cannot be zero: "+n);w=-(v=n<0?-n:n)}if(t.hasOwnProperty(e="CRYPTO")){if((n=t[e])!==!!n)throw Error(pr+e+" not true or false: "+n);if(n){if("undefined"==typeof crypto||!crypto||!crypto.getRandomValues&&!crypto.randomBytes)throw b=!n,Error(pr+"crypto unavailable");b=n}else b=n}if(t.hasOwnProperty(e="MODULO_MODE")&&(Ar(n=t[e],0,9,e),E=n),t.hasOwnProperty(e="POW_PRECISION")&&(Ar(n=t[e],0,wr,e),A=n),t.hasOwnProperty(e="FORMAT")){if("object"!=typeof(n=t[e]))throw Error(pr+e+" not an object: "+n);_=n}if(t.hasOwnProperty(e="ALPHABET")){if("string"!=typeof(n=t[e])||/^.?$|[+\-.\s]|(.).*\1/.test(n))throw Error(pr+e+" invalid: "+n);I="0123456789"==n.slice(0,10),S=n}}return{DECIMAL_PLACES:p,ROUNDING_MODE:m,EXPONENTIAL_AT:[y,g],RANGE:[w,v],CRYPTO:b,MODULO_MODE:E,POW_PRECISION:A,FORMAT:_,ALPHABET:S}},x.isBigNumber=function(t){if(!t||!0!==t._isBigNumber)return!1;if(!x.DEBUG)return!0;var e,n,r=t.c,o=t.e,i=t.s;t:if("[object Array]"=={}.toString.call(r)){if((1===i||-1===i)&&o>=-wr&&o<=wr&&o===fr(o)){if(0===r[0]){if(0===o&&1===r.length)return!0;break t}if((e=(o+1)%14)<1&&(e+=14),String(r[0]).length==e){for(e=0;e<r.length;e++)if((n=r[e])<0||n>=yr||n!==fr(n))break t;if(0!==n)return!0}}}else if(null===r&&null===o&&(null===i||1===i||-1===i))return!0;throw Error(pr+"Invalid BigNumber: "+t)},x.maximum=x.max=function(){return L(arguments,h.lt)},x.minimum=x.min=function(){return L(arguments,h.gt)},x.random=(i=9007199254740992,s=Math.random()*i&2097151?function(){return fr(Math.random()*i)}:function(){return 8388608*(1073741824*Math.random()|0)+(8388608*Math.random()|0)},function(t){var e,n,r,o,i,a=0,c=[],u=new x(f);if(null==t?t=p:Ar(t,0,wr),o=hr(t/14),b)if(crypto.getRandomValues){for(e=crypto.getRandomValues(new Uint32Array(o*=2));a<o;)(i=131072*e[a]+(e[a+1]>>>11))>=9e15?(n=crypto.getRandomValues(new Uint32Array(2)),e[a]=n[0],e[a+1]=n[1]):(c.push(i%1e14),a+=2);a=o/2}else{if(!crypto.randomBytes)throw b=!1,Error(pr+"crypto unavailable");for(e=crypto.randomBytes(o*=7);a<o;)(i=281474976710656*(31&e[a])+1099511627776*e[a+1]+4294967296*e[a+2]+16777216*e[a+3]+(e[a+4]<<16)+(e[a+5]<<8)+e[a+6])>=9e15?crypto.randomBytes(7).copy(e,a):(c.push(i%1e14),a+=7);a=o/7}if(!b)for(;a<o;)(i=s())<9e15&&(c[a++]=i%1e14);for(t%=14,(o=c[--a])&&t&&(i=gr[14-t],c[a]=fr(o/i)*i);0===c[a];c.pop(),a--);if(a<0)c=[r=0];else{for(r=-1;0===c[0];c.splice(0,1),r-=14);for(a=1,i=c[0];i>=10;i/=10,a++);a<14&&(r-=14-a)}return u.e=r,u.c=c,u}),x.sum=function(){for(var t=1,e=arguments,n=new x(e[0]);t<e.length;)n=n.plus(e[t++]);return n},r=function(){var t="0123456789";function e(t,e,n,r){for(var o,i,s=[0],a=0,c=t.length;a<c;){for(i=s.length;i--;s[i]*=e);for(s[0]+=r.indexOf(t.charAt(a++)),o=0;o<s.length;o++)s[o]>n-1&&(null==s[o+1]&&(s[o+1]=0),s[o+1]+=s[o]/n|0,s[o]%=n)}return s.reverse()}return function(r,o,i,s,a){var c,u,l,d,h,f,y,g,w=r.indexOf("."),v=p,b=m;for(w>=0&&(d=A,A=0,r=r.replace(".",""),f=(g=new x(o)).pow(r.length-w),A=d,g.c=e(Ir(br(f.c),f.e,"0"),10,i,t),g.e=g.c.length),l=d=(y=e(r,o,i,a?(c=S,t):(c=t,S))).length;0==y[--d];y.pop());if(!y[0])return c.charAt(0);if(w<0?--l:(f.c=y,f.e=l,f.s=s,y=(f=n(f,g,v,b,i)).c,h=f.r,l=f.e),w=y[u=l+v+1],d=i/2,h=h||u<0||null!=y[u+1],h=b<4?(null!=w||h)&&(0==b||b==(f.s<0?3:2)):w>d||w==d&&(4==b||h||6==b&&1&y[u-1]||b==(f.s<0?8:7)),u<1||!y[0])r=h?Ir(c.charAt(1),-v,c.charAt(0)):c.charAt(0);else{if(y.length=u,h)for(--i;++y[--u]>i;)y[u]=0,u||(++l,y=[1].concat(y));for(d=y.length;!y[--d];);for(w=0,r="";w<=d;r+=c.charAt(y[w++]));r=Ir(r,l,c.charAt(0))}return r}}(),n=function(){function t(t,e,n){var r,o,i,s,a=0,c=t.length,u=e%1e7,l=e/1e7|0;for(t=t.slice();c--;)a=((o=u*(i=t[c]%1e7)+(r=l*i+(s=t[c]/1e7|0)*u)%1e7*1e7+a)/n|0)+(r/1e7|0)+l*s,t[c]=o%n;return a&&(t=[a].concat(t)),t}function e(t,e,n,r){var o,i;if(n!=r)i=n>r?1:-1;else for(o=i=0;o<n;o++)if(t[o]!=e[o]){i=t[o]>e[o]?1:-1;break}return i}function n(t,e,n,r){for(var o=0;n--;)t[n]-=o,o=t[n]<e[n]?1:0,t[n]=o*r+t[n]-e[n];for(;!t[0]&&t.length>1;t.splice(0,1));}return function(r,o,i,s,a){var c,u,l,d,h,f,p,m,y,g,w,v,b,E,A,_,S,I=r.s==o.s?1:-1,k=r.c,L=o.c;if(!(k&&k[0]&&L&&L[0]))return new x(r.s&&o.s&&(k?!L||k[0]!=L[0]:L)?k&&0==k[0]||!L?0*I:I/0:NaN);for(y=(m=new x(I)).c=[],I=i+(u=r.e-o.e)+1,a||(a=yr,u=vr(r.e/14)-vr(o.e/14),I=I/14|0),l=0;L[l]==(k[l]||0);l++);if(L[l]>(k[l]||0)&&u--,I<0)y.push(1),d=!0;else{for(E=k.length,_=L.length,l=0,I+=2,(h=fr(a/(L[0]+1)))>1&&(L=t(L,h,a),k=t(k,h,a),_=L.length,E=k.length),b=_,w=(g=k.slice(0,_)).length;w<_;g[w++]=0);S=L.slice(),S=[0].concat(S),A=L[0],L[1]>=a/2&&A++;do{if(h=0,(c=e(L,g,_,w))<0){if(v=g[0],_!=w&&(v=v*a+(g[1]||0)),(h=fr(v/A))>1)for(h>=a&&(h=a-1),p=(f=t(L,h,a)).length,w=g.length;1==e(f,g,p,w);)h--,n(f,_<p?S:L,p,a),p=f.length,c=1;else 0==h&&(c=h=1),p=(f=L.slice()).length;if(p<w&&(f=[0].concat(f)),n(g,f,w,a),w=g.length,-1==c)for(;e(L,g,_,w)<1;)h++,n(g,_<w?S:L,w,a),w=g.length}else 0===c&&(h++,g=[0]);y[l++]=h,g[0]?g[w++]=k[b]||0:(g=[k[b]],w=1)}while((b++<E||null!=g[0])&&I--);d=null!=g[0],y[0]||y.splice(0,1)}if(a==yr){for(l=1,I=y[0];I>=10;I/=10,l++);O(m,i+(m.e=l+14*u-1)+1,s,d)}else m.e=u,m.r=+d;return m}}(),a=/^(-?)0([xbo])(?=\w[\w.]*$)/i,c=/^([^.]+)\.$/,u=/^\.([^.]+)$/,l=/^-?(Infinity|NaN)$/,d=/^\s*\+(?=[\w.])|^\s+|\s+$/g,o=function(t,e,n,r){var o,i=n?e:e.replace(d,"");if(l.test(i))t.s=isNaN(i)?null:i<0?-1:1;else{if(!n&&(i=i.replace(a,(function(t,e,n){return o="x"==(n=n.toLowerCase())?16:"b"==n?2:8,r&&r!=o?t:e})),r&&(o=r,i=i.replace(c,"$1").replace(u,"0.$1")),e!=i))return new x(i,o);if(x.DEBUG)throw Error(pr+"Not a"+(r?" base "+r:"")+" number: "+e);t.s=null}t.c=t.e=null},h.absoluteValue=h.abs=function(){var t=new x(this);return t.s<0&&(t.s=1),t},h.comparedTo=function(t,e){return Er(this,new x(t,e))},h.decimalPlaces=h.dp=function(t,e){var n,r,o,i=this;if(null!=t)return Ar(t,0,wr),null==e?e=m:Ar(e,0,8),O(new x(i),t+i.e+1,e);if(!(n=i.c))return null;if(r=14*((o=n.length-1)-vr(this.e/14)),o=n[o])for(;o%10==0;o/=10,r--);return r<0&&(r=0),r},h.dividedBy=h.div=function(t,e){return n(this,new x(t,e),p,m)},h.dividedToIntegerBy=h.idiv=function(t,e){return n(this,new x(t,e),0,1)},h.exponentiatedBy=h.pow=function(t,e){var n,r,o,i,s,a,c,u,l=this;if((t=new x(t)).c&&!t.isInteger())throw Error(pr+"Exponent not an integer: "+B(t));if(null!=e&&(e=new x(e)),s=t.e>14,!l.c||!l.c[0]||1==l.c[0]&&!l.e&&1==l.c.length||!t.c||!t.c[0])return u=new x(Math.pow(+B(l),s?2-_r(t):+B(t))),e?u.mod(e):u;if(a=t.s<0,e){if(e.c?!e.c[0]:!e.s)return new x(NaN);(r=!a&&l.isInteger()&&e.isInteger())&&(l=l.mod(e))}else{if(t.e>9&&(l.e>0||l.e<-1||(0==l.e?l.c[0]>1||s&&l.c[1]>=24e7:l.c[0]<8e13||s&&l.c[0]<=9999975e7)))return i=l.s<0&&_r(t)?-0:0,l.e>-1&&(i=1/i),new x(a?1/i:i);A&&(i=hr(A/14+2))}for(s?(n=new x(.5),a&&(t.s=1),c=_r(t)):c=(o=Math.abs(+B(t)))%2,u=new x(f);;){if(c){if(!(u=u.times(l)).c)break;i?u.c.length>i&&(u.c.length=i):r&&(u=u.mod(e))}if(o){if(0===(o=fr(o/2)))break;c=o%2}else if(O(t=t.times(n),t.e+1,1),t.e>14)c=_r(t);else{if(0==(o=+B(t)))break;c=o%2}l=l.times(l),i?l.c&&l.c.length>i&&(l.c.length=i):r&&(l=l.mod(e))}return r?u:(a&&(u=f.div(u)),e?u.mod(e):i?O(u,A,m,void 0):u)},h.integerValue=function(t){var e=new x(this);return null==t?t=m:Ar(t,0,8),O(e,e.e+1,t)},h.isEqualTo=h.eq=function(t,e){return 0===Er(this,new x(t,e))},h.isFinite=function(){return!!this.c},h.isGreaterThan=h.gt=function(t,e){return Er(this,new x(t,e))>0},h.isGreaterThanOrEqualTo=h.gte=function(t,e){return 1===(e=Er(this,new x(t,e)))||0===e},h.isInteger=function(){return!!this.c&&vr(this.e/14)>this.c.length-2},h.isLessThan=h.lt=function(t,e){return Er(this,new x(t,e))<0},h.isLessThanOrEqualTo=h.lte=function(t,e){return-1===(e=Er(this,new x(t,e)))||0===e},h.isNaN=function(){return!this.s},h.isNegative=function(){return this.s<0},h.isPositive=function(){return this.s>0},h.isZero=function(){return!!this.c&&0==this.c[0]},h.minus=function(t,e){var n,r,o,i,s=this,a=s.s;if(e=(t=new x(t,e)).s,!a||!e)return new x(NaN);if(a!=e)return t.s=-e,s.plus(t);var c=s.e/14,u=t.e/14,l=s.c,d=t.c;if(!c||!u){if(!l||!d)return l?(t.s=-e,t):new x(d?s:NaN);if(!l[0]||!d[0])return d[0]?(t.s=-e,t):new x(l[0]?s:3==m?-0:0)}if(c=vr(c),u=vr(u),l=l.slice(),a=c-u){for((i=a<0)?(a=-a,o=l):(u=c,o=d),o.reverse(),e=a;e--;o.push(0));o.reverse()}else for(r=(i=(a=l.length)<(e=d.length))?a:e,a=e=0;e<r;e++)if(l[e]!=d[e]){i=l[e]<d[e];break}if(i&&(o=l,l=d,d=o,t.s=-t.s),(e=(r=d.length)-(n=l.length))>0)for(;e--;l[n++]=0);for(e=yr-1;r>a;){if(l[--r]<d[r]){for(n=r;n&&!l[--n];l[n]=e);--l[n],l[r]+=yr}l[r]-=d[r]}for(;0==l[0];l.splice(0,1),--u);return l[0]?T(t,l,u):(t.s=3==m?-1:1,t.c=[t.e=0],t)},h.modulo=h.mod=function(t,e){var r,o,i=this;return t=new x(t,e),!i.c||!t.s||t.c&&!t.c[0]?new x(NaN):!t.c||i.c&&!i.c[0]?new x(i):(9==E?(o=t.s,t.s=1,r=n(i,t,0,3),t.s=o,r.s*=o):r=n(i,t,0,E),(t=i.minus(r.times(t))).c[0]||1!=E||(t.s=i.s),t)},h.multipliedBy=h.times=function(t,e){var n,r,o,i,s,a,c,u,l,d,h,f,p,m,y,g=this,w=g.c,v=(t=new x(t,e)).c;if(!(w&&v&&w[0]&&v[0]))return!g.s||!t.s||w&&!w[0]&&!v||v&&!v[0]&&!w?t.c=t.e=t.s=null:(t.s*=g.s,w&&v?(t.c=[0],t.e=0):t.c=t.e=null),t;for(r=vr(g.e/14)+vr(t.e/14),t.s*=g.s,(c=w.length)<(d=v.length)&&(p=w,w=v,v=p,o=c,c=d,d=o),o=c+d,p=[];o--;p.push(0));for(m=yr,y=1e7,o=d;--o>=0;){for(n=0,h=v[o]%y,f=v[o]/y|0,i=o+(s=c);i>o;)n=((u=h*(u=w[--s]%y)+(a=f*u+(l=w[s]/y|0)*h)%y*y+p[i]+n)/m|0)+(a/y|0)+f*l,p[i--]=u%m;p[i]=n}return n?++r:p.splice(0,1),T(t,p,r)},h.negated=function(){var t=new x(this);return t.s=-t.s||null,t},h.plus=function(t,e){var n,r=this,o=r.s;if(e=(t=new x(t,e)).s,!o||!e)return new x(NaN);if(o!=e)return t.s=-e,r.minus(t);var i=r.e/14,s=t.e/14,a=r.c,c=t.c;if(!i||!s){if(!a||!c)return new x(o/0);if(!a[0]||!c[0])return c[0]?t:new x(a[0]?r:0*o)}if(i=vr(i),s=vr(s),a=a.slice(),o=i-s){for(o>0?(s=i,n=c):(o=-o,n=a),n.reverse();o--;n.push(0));n.reverse()}for((o=a.length)-(e=c.length)<0&&(n=c,c=a,a=n,e=o),o=0;e;)o=(a[--e]=a[e]+c[e]+o)/yr|0,a[e]=yr===a[e]?0:a[e]%yr;return o&&(a=[o].concat(a),++s),T(t,a,s)},h.precision=h.sd=function(t,e){var n,r,o,i=this;if(null!=t&&t!==!!t)return Ar(t,1,wr),null==e?e=m:Ar(e,0,8),O(new x(i),t,e);if(!(n=i.c))return null;if(r=14*(o=n.length-1)+1,o=n[o]){for(;o%10==0;o/=10,r--);for(o=n[0];o>=10;o/=10,r++);}return t&&i.e+1>r&&(r=i.e+1),r},h.shiftedBy=function(t){return Ar(t,-9007199254740991,9007199254740991),this.times("1e"+t)},h.squareRoot=h.sqrt=function(){var t,e,r,o,i,s=this,a=s.c,c=s.s,u=s.e,l=p+4,d=new x("0.5");if(1!==c||!a||!a[0])return new x(!c||c<0&&(!a||a[0])?NaN:a?s:1/0);if(0==(c=Math.sqrt(+B(s)))||c==1/0?(((e=br(a)).length+u)%2==0&&(e+="0"),c=Math.sqrt(+e),u=vr((u+1)/2)-(u<0||u%2),r=new x(e=c==1/0?"5e"+u:(e=c.toExponential()).slice(0,e.indexOf("e")+1)+u)):r=new x(c+""),r.c[0])for((c=(u=r.e)+l)<3&&(c=0);;)if(i=r,r=d.times(i.plus(n(s,i,l,1))),br(i.c).slice(0,c)===(e=br(r.c)).slice(0,c)){if(r.e<u&&--c,"9999"!=(e=e.slice(c-3,c+1))&&(o||"4999"!=e)){+e&&(+e.slice(1)||"5"!=e.charAt(0))||(O(r,r.e+p+2,1),t=!r.times(r).eq(s));break}if(!o&&(O(i,i.e+p+2,0),i.times(i).eq(s))){r=i;break}l+=4,c+=4,o=1}return O(r,r.e+p+1,m,t)},h.toExponential=function(t,e){return null!=t&&(Ar(t,0,wr),t++),k(this,t,e,1)},h.toFixed=function(t,e){return null!=t&&(Ar(t,0,wr),t=t+this.e+1),k(this,t,e)},h.toFormat=function(t,e,n){var r,o=this;if(null==n)null!=t&&e&&"object"==typeof e?(n=e,e=null):t&&"object"==typeof t?(n=t,t=e=null):n=_;else if("object"!=typeof n)throw Error(pr+"Argument not an object: "+n);if(r=o.toFixed(t,e),o.c){var i,s=r.split("."),a=+n.groupSize,c=+n.secondaryGroupSize,u=n.groupSeparator||"",l=s[0],d=s[1],h=o.s<0,f=h?l.slice(1):l,p=f.length;if(c&&(i=a,a=c,c=i,p-=i),a>0&&p>0){for(i=p%a||a,l=f.substr(0,i);i<p;i+=a)l+=u+f.substr(i,a);c>0&&(l+=u+f.slice(i)),h&&(l="-"+l)}r=d?l+(n.decimalSeparator||"")+((c=+n.fractionGroupSize)?d.replace(new RegExp("\\d{"+c+"}\\B","g"),"$&"+(n.fractionGroupSeparator||"")):d):l}return(n.prefix||"")+r+(n.suffix||"")},h.toFraction=function(t){var e,r,o,i,s,a,c,u,l,d,h,p,y=this,g=y.c;if(null!=t&&(!(c=new x(t)).isInteger()&&(c.c||1!==c.s)||c.lt(f)))throw Error(pr+"Argument "+(c.isInteger()?"out of range: ":"not an integer: ")+B(c));if(!g)return new x(y);for(e=new x(f),l=r=new x(f),o=u=new x(f),p=br(g),s=e.e=p.length-y.e-1,e.c[0]=gr[(a=s%14)<0?14+a:a],t=!t||c.comparedTo(e)>0?s>0?e:l:c,a=v,v=1/0,c=new x(p),u.c[0]=0;d=n(c,e,0,1),1!=(i=r.plus(d.times(o))).comparedTo(t);)r=o,o=i,l=u.plus(d.times(i=l)),u=i,e=c.minus(d.times(i=e)),c=i;return i=n(t.minus(r),o,0,1),u=u.plus(i.times(l)),r=r.plus(i.times(o)),u.s=l.s=y.s,h=n(l,o,s*=2,m).minus(y).abs().comparedTo(n(u,r,s,m).minus(y).abs())<1?[l,o]:[u,r],v=a,h},h.toNumber=function(){return+B(this)},h.toPrecision=function(t,e){return null!=t&&Ar(t,1,wr),k(this,t,e,2)},h.toString=function(t){var e,n=this,o=n.s,i=n.e;return null===i?o?(e="Infinity",o<0&&(e="-"+e)):e="NaN":(null==t?e=i<=y||i>=g?Sr(br(n.c),i):Ir(br(n.c),i,"0"):10===t&&I?e=Ir(br((n=O(new x(n),p+i+1,m)).c),n.e,"0"):(Ar(t,2,S.length,"Base"),e=r(Ir(br(n.c),i,"0"),10,t,o,!0)),o<0&&n.c[0]&&(e="-"+e)),e},h.valueOf=h.toJSON=function(){return B(this)},h._isBigNumber=!0,h[Symbol.toStringTag]="BigNumber",h[Symbol.for("nodejs.util.inspect.custom")]=h.valueOf,null!=e&&x.set(e),x}();new xr("1e+18");const kr=e=>{const n=cr(32,e),{encode:r,decode:o}=ur(n),i=n;return i.decode=(e,n)=>{const r=o(e,n);return new t(r)},i.encode=(t,e,n)=>{const o=t.toBuffer();return r(o,e,n)},i};function Lr(t){return new Tr(8,!1,t)}class Tr extends _n{constructor(t,e,n){super(t,n),this.blob=cr(t),this.signed=e}encode(t,e,n=0){return this.signed&&(t=t.toTwos(8*this.span)),this.blob.encode(t.toArrayLike(Buffer,"le",this.span),e,n)}decode(t,e=0){const n=new c(this.blob.decode(t,e),10,"le");return this.signed?n.fromTwos(8*this.span).clone():n}}class Or{constructor(t){}async encode(t,e){if("vesting"===t){const t=Buffer.alloc(657),n=Br.encode(e,t);return t.slice(0,n)}throw new Error(`Invalid account name: ${t}`)}decode(t,e){return this.decodeUnchecked(t,e)}decodeUnchecked(t,e){if("vesting"===t)return function(t){return Br.decode(t)}(e);throw new Error(`Invalid account name: ${t}`)}memcmp(t,e){if("vesting"===t)return{dataSize:657};throw new Error(`Invalid account name: ${t}`)}size(t){if("vesting"===t.name)return 657;throw new Error(`Invalid account name: ${t.name}`)}}const Br=ir([kr("destinationAddress"),kr("mintAddress"),(t=>{const e=rr(t),{encode:n,decode:r}=ur(e),o=e;return o.decode=(t,e)=>!!r(t,e),o.encode=(t,e,r)=>{const o=Number(t);return n(o,e,r)},o})("isInitialized"),sr(ir([Lr("releaseTime"),Lr("amount")]),37,"schedule")]);class Pr{constructor(t){}decode(t){throw new Error("TokenVesting program does not have events")}}class Mr{constructor(t){}encode(t,e){switch(t){case"init":return function({seeds:t,numberOfSchedules:e}){return Dr({init:{seeds:t,numberOfSchedules:e}},37)}(e);case"create":return function({seeds:t,mintAddress:e,destinationTokenAddress:n,schedules:r}){return Dr({create:{seeds:t,mintAddress:e,destinationTokenAddress:n,schedules:r}},689)}(e);case"unlock":return function({seeds:t}){return Dr({unlock:{seeds:t}},33)}(e);case"changeDestination":return function({seeds:t}){return Dr({changeDestination:{seeds:t}},33)}(e);default:throw new Error(`Invalid instruction: ${t}`)}}encodeState(t,e){throw new Error("TokenVesting does not have state")}}const Ur=ar(rr("instruction"));function Dr(t,e){const n=Buffer.alloc(e);return Ur.encode(t,n),n}Ur.addVariant(0,ir([sr(rr(),32,"seeds"),or("numberOfSchedules")]),"init"),Ur.addVariant(1,ir([sr(rr(),32,"seeds"),kr("mintAddress"),kr("destinationTokenAddress"),sr(ir([Lr("releaseTime"),Lr("amount")]),37,"schedules")]),"create"),Ur.addVariant(2,ir([sr(rr(),32,"seeds")]),"unlock"),Ur.addVariant(3,ir([sr(rr(),32,"seeds")]),"changeDestination");class Nr{constructor(t){}encode(t,e){throw new Error("TokenVesting does not have state")}decode(t){throw new Error("TokenVesting does not have state")}}class Cr{constructor(t){}encode(t,e){throw new Error("TokenVesting does not have user-defined types")}decode(t,e){throw new Error("TokenVesting does not have user-defined types")}}class zr{constructor(t){this.accounts=new Or(t),this.events=new Pr(t),this.instruction=new Mr(t),this.state=new Nr(t),this.types=new Cr(t)}}const Rr=t.default;function jr(t){var e;return new gn(Vr,null!==(e=null==t?void 0:t.programId)&&void 0!==e?e:Rr,null==t?void 0:t.provider,new zr(Vr))}const Vr={version:"0.1.0",name:"token_vesting",instructions:[{name:"init",accounts:[{name:"systemProgram",isMut:!1,isSigner:!1},{name:"rentProgram",isMut:!1,isSigner:!1},{name:"payer",isMut:!0,isSigner:!0},{name:"vestingAccount",isMut:!0,isSigner:!1}],args:[{name:"seeds",type:{array:["u8",32]}},{name:"numberOfSchedules",type:"u32"}]},{name:"create",accounts:[{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"vestingAccount",isMut:!0,isSigner:!1},{name:"vestingTokenAccount",isMut:!0,isSigner:!1},{name:"sourceTokenAccountOwner",isMut:!1,isSigner:!0},{name:"sourceTokenAccount",isMut:!0,isSigner:!1}],args:[{name:"seeds",type:{array:["u8",32]}},{name:"mintAddress",type:"publicKey"},{name:"destinationTokenAddress",type:"publicKey"},{name:"schedules",type:{array:[{defined:"Schedule"},37]}}]},{name:"unlock",accounts:[{name:"tokenProgram",isMut:!1,isSigner:!1},{name:"clock",isMut:!1,isSigner:!1},{name:"vestingAccount",isMut:!0,isSigner:!1},{name:"vestingTokenAccount",isMut:!0,isSigner:!1},{name:"destinationTokenAccount",isMut:!0,isSigner:!1}],args:[{name:"seeds",type:{array:["u8",32]}}]},{name:"changeDestination",accounts:[{name:"vestingAccount",isMut:!0,isSigner:!1},{name:"currentDestinationTokenAccount",isMut:!1,isSigner:!1},{name:"currentDestinationTokenAccountOwner",isMut:!1,isSigner:!0},{name:"targetDestinationTokenAccount",isMut:!1,isSigner:!1}],args:[{name:"seeds",type:{array:["u8",32]}}]}],accounts:[{name:"vesting",type:{kind:"struct",fields:[{name:"destinationAddress",type:"publicKey"},{name:"mintAddress",type:"publicKey"},{name:"isInitialized",type:"bool"},{name:"schedule",type:{array:[{defined:"Schedule"},37]}}]}}],types:[{name:"Schedule",type:{kind:"struct",fields:[{name:"releaseTime",type:"u64"},{name:"amount",type:"u64"}]}}],errors:[{code:0,name:"InvalidInstruction",msg:"Invalid Instruction"}]};export{jr as tokenVestingProgram};
//# sourceMappingURL=index.js.map
